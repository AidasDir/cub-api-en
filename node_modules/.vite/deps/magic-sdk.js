import {
  __publicField,
  __require
} from "./chunk-2TUXWMP5.js";

// node_modules/@magic-sdk/types/dist/es/index.mjs
var m = ((p2) => (p2.MissingApiKey = "MISSING_API_KEY", p2.ModalNotReady = "MODAL_NOT_READY", p2.ConnectionLost = "CONNECTION_WAS_LOST", p2.MalformedResponse = "MALFORMED_RESPONSE", p2.InvalidArgument = "INVALID_ARGUMENT", p2.ExtensionNotInitialized = "EXTENSION_NOT_INITIALIZED", p2.IncompatibleExtensions = "INCOMPATIBLE_EXTENSIONS", p2))(m || {});
var v = ((o) => (o.SyncWeb3Method = "SYNC_WEB3_METHOD", o.DuplicateIframe = "DUPLICATE_IFRAME", o.ReactNativeEndpointConfiguration = "REACT_NATIVE_ENDPOINT_CONFIGURATION", o.DeprecationNotice = "DEPRECATION_NOTICE", o.ProductAnnouncement = "ANNOUNCEMENT", o))(v || {});
var u = ((i) => (i[i.ParseError = -32700] = "ParseError", i[i.InvalidRequest = -32600] = "InvalidRequest", i[i.MethodNotFound = -32601] = "MethodNotFound", i[i.InvalidParams = -32602] = "InvalidParams", i[i.InternalError = -32603] = "InternalError", i[i.MagicLinkFailedVerification = -1e4] = "MagicLinkFailedVerification", i[i.MagicLinkExpired = -10001] = "MagicLinkExpired", i[i.MagicLinkRateLimited = -10002] = "MagicLinkRateLimited", i[i.MagicLinkInvalidRedirectURL = -10006] = "MagicLinkInvalidRedirectURL", i[i.UserAlreadyLoggedIn = -10003] = "UserAlreadyLoggedIn", i[i.UpdateEmailFailed = -10004] = "UpdateEmailFailed", i[i.UserRequestEditEmail = -10005] = "UserRequestEditEmail", i[i.InactiveRecipient = -10010] = "InactiveRecipient", i[i.AccessDeniedToUser = -10011] = "AccessDeniedToUser", i[i.RedirectLoginComplete = -10015] = "RedirectLoginComplete", i[i.DpopInvalidated = -10019] = "DpopInvalidated", i))(u || {});
var _ = ((t) => (t.PROVIDER = "magic_3pw_provider", t.ADDRESS = "magic_3pw_address", t.CHAIN_ID = "magic_3pw_chainId", t))(_ || {});
var f = ((t) => (t.WalletConnected = "wallet_connected", t.WalletRejected = "wallet_rejected", t.Web3ModalSelected = "web3modal_selected", t))(f || {});
var g = ((e) => (e.LoginWithSms = "magic_auth_login_with_sms", e.LoginWithEmailOTP = "magic_auth_login_with_email_otp", e.LoginWithMagicLink = "magic_auth_login_with_magic_link", e.LoginWithCredential = "magic_auth_login_with_credential", e.SetAuthorizationToken = "magic_auth_set_authorization_token", e.GetIdToken = "magic_auth_get_id_token", e.GenerateIdToken = "magic_auth_generate_id_token", e.GetMetadata = "magic_auth_get_metadata", e.IsLoggedIn = "magic_is_logged_in", e.Logout = "magic_auth_logout", e.UpdateEmail = "magic_auth_update_email", e.UserSettings = "magic_auth_settings", e.UserSettingsTestMode = "magic_auth_settings_testing_mode", e.LoginWithSmsTestMode = "magic_auth_login_with_sms_testing_mode", e.LoginWithEmailOTPTestMode = "magic_auth_login_with_email_otp_testing_mode", e.LoginWithMagicLinkTestMode = "magic_login_with_magic_link_testing_mode", e.LoginWithCredentialTestMode = "magic_auth_login_with_credential_testing_mode", e.GetIdTokenTestMode = "magic_auth_get_id_token_testing_mode", e.GenerateIdTokenTestMode = "magic_auth_generate_id_token_testing_mode", e.GetMetadataTestMode = "magic_auth_get_metadata_testing_mode", e.IsLoggedInTestMode = "magic_auth_is_logged_in_testing_mode", e.LogoutTestMode = "magic_auth_logout_testing_mode", e.UpdateEmailTestMode = "magic_auth_update_email_testing_mode", e.IntermediaryEvent = "magic_intermediary_event", e.RequestAccounts = "eth_requestAccounts", e.GetInfo = "magic_get_info", e.ShowUI = "magic_wallet", e.NFTPurchase = "magic_nft_purchase", e.NFTCheckout = "magic_nft_checkout", e.NFTTransfer = "magic_nft_transfer", e.RequestUserInfoWithUI = "mc_request_user_info", e.Disconnect = "mc_disconnect", e.RecoverAccount = "magic_auth_recover_account", e.RecoverAccountTestMode = "magic_auth_recover_account_testing_mode", e.MagicBoxHeartBeat = "magic_box_heart_beat", e.AutoConnect = "mc_auto_connect", e.Login = "mc_login", e.EncryptV1 = "magic_auth_encrypt_v1", e.DecryptV1 = "magic_auth_decrypt_v1", e.ShowNFTs = "magic_show_nfts", e.ShowOnRamp = "magic_show_fiat_onramp", e.ShowSendTokensUI = "magic_show_send_tokens_ui", e.ShowAddress = "magic_show_address", e.ShowBalances = "magic_show_balances", e.SendGaslessTransaction = "eth_sendGaslessTransaction", e.RevealPK = "magic_reveal_key", e.EnableMFA = "magic_auth_enable_mfa_flow", e.DisableMFA = "magic_auth_disable_mfa_flow", e))(g || {});
var Z = ["magic_intermediary_event", "magic_nft_checkout", "mc_login"];
var E = ((s) => (s.MAGIC_HANDLE_RESPONSE = "MAGIC_HANDLE_RESPONSE", s.MAGIC_OVERLAY_READY = "MAGIC_OVERLAY_READY", s.MAGIC_SHOW_OVERLAY = "MAGIC_SHOW_OVERLAY", s.MAGIC_HIDE_OVERLAY = "MAGIC_HIDE_OVERLAY", s.MAGIC_HANDLE_EVENT = "MAGIC_HANDLE_EVENT", s.MAGIC_MG_BOX_SEND_RECEIPT = "MAGIC_MG_BOX_SEND_RECEIPT", s.MAGIC_SEND_PRODUCT_ANNOUNCEMENT = "MAGIC_SEND_PRODUCT_ANNOUNCEMENT", s.MAGIC_PONG = "MAGIC_PONG", s.MAGIC_POPUP_RESPONSE = "MAGIC_POPUP_RESPONSE", s.MAGIC_POPUP_OAUTH_VERIFY_RESPONSE = "MAGIC_POPUP_OAUTH_VERIFY_RESPONSE", s))(E || {});
var x = ((d) => (d.MAGIC_HANDLE_REQUEST = "MAGIC_HANDLE_REQUEST", d.MAGIC_PING = "MAGIC_PING", d))(x || {});
var y = ((t) => (t.UpdateEmail = "update-email", t.MFA = "mfa", t.Recovery = "recovery", t))(y || {});
var A = ((r8) => (r8.Retry = "retry", r8))(A || {});
var I = ((d) => (d.EmailSent = "email-sent", d.EmailNotDeliverable = "email-not-deliverable", d))(I || {});
var R = ((o) => (o.VerifyEmailOtp = "verify-email-otp", o.VerifyMFACode = "verify-mfa-code", o.LostDevice = "lost-device", o.VerifyRecoveryCode = "verify-recovery-code", o.Cancel = "cancel", o))(R || {});
var N = ((t) => (t.VerifySmsOtp = "verify-sms-otp", t.Cancel = "cancel", t.Retry = "retry", t))(N || {});
var h = ((t) => (t.SmsOTPSent = "sms-otp-sent", t.InvalidSmsOtp = "invalid-sms-otp", t.ExpiredSmsOtp = "expired-sms-otp", t))(h || {});
var T = ((c) => (c.EmailOTPSent = "email-otp-sent", c.InvalidEmailOtp = "invalid-email-otp", c.InvalidMfaOtp = "invalid-mfa-otp", c.ExpiredEmailOtp = "expired-email-otp", c.MfaSentHandle = "mfa-sent-handle", c.RecoveryCodeSentHandle = "recovery-code-sent-handle", c.InvalidRecoveryCode = "invalid-recovery-code", c.RecoveryCodeSuccess = "recovery-code-success", c.LoginThrottled = "login-throttled", c))(T || {});
var O = ((r8) => (r8.Retry = "device-retry", r8))(O || {});
var S = ((n) => (n.DeviceApproved = "device-approved", n.DeviceNeedsApproval = "device-needs-approval", n.DeviceVerificationLinkExpired = "device-verification-link-expired", n.DeviceVerificationEmailSent = "device-verification-email-sent", n))(S || {});
var b = ((n) => (n.Retry = "Recency/auth-factor-retry", n.Cancel = "Recency/auth-factor-verification-cancel", n.VerifyEmailOtp = "Recency/auth-factor-verify-email-otp", n.VerifyMFACode = "Recency/verify-mfa-code", n))(b || {});
var C = ((a) => (a.PrimaryAuthFactorNeedsVerification = "Recency/auth-factor-needs-verification", a.PrimaryAuthFactorVerified = "Recency/auth-factor-verified", a.InvalidEmailOtp = "Recency/auth-factor-invalid-email-otp", a.EmailExpired = "Recency/auth-factor-verification-email-expired", a.EmailSent = "Recency/auth-factor-verification-email-sent", a.EmailNotDeliverable = "Recency/auth-factor-verification-email-not-deliverable", a))(C || {});
var F = ((t) => (t.RetryWithNewEmail = "UpdateEmail/retry-with-new-email", t.Cancel = "UpdateEmail/new-email-verification-cancel", t.VerifyEmailOtp = "UpdateEmail/new-email-verify-otp", t))(F || {});
var U = ((l) => (l.NewAuthFactorNeedsVerification = "UpdateEmail/new-email-needs-verification", l.EmailUpdated = "UpdateEmail/email-updated", l.InvalidEmailOtp = "UpdateEmail/new-email-invalid-email-otp", l.EmailExpired = "UpdateEmail/new-email-verification-email-expired", l.EmailSent = "UpdateEmail/new-email-verification-email-sent", l.EmailNotDeliverable = "UpdateEmail/new-email-verification-email-not-deliverable", l.InvalidEmail = "UpdateEmail/new-email-invalid", l.EmailAlreadyExists = "UpdateEmail/new-email-already-exists", l))(U || {});
var k = ((r8) => (r8.IDTokenCreated = "Auth/id-token-created", r8))(k || {});
var L = ((r8) => (r8.Cancel = "Farcaster/cancel", r8))(L || {});
var w = ((t) => (t.MFASecretGenerated = "mfa-secret-generated", t.InvalidMFAOtp = "invalid-mfa-otp", t.MFARecoveryCodes = "mfa-recovery-codes", t))(w || {});
var D = ((d) => (d.VerifyMFACode = "verify-mfa-code", d.Cancel = "cancel-mfa-setup", d))(D || {});
var V = ((t) => (t.MFACodeRequested = "mfa-code-requested", t.InvalidMFAOtp = "invalid-mfa-otp", t.InvalidRecoveryCode = "invalid-recovery-code", t))(V || {});
var G = ((t) => (t.VerifyMFACode = "verify-mfa-code", t.LostDevice = "lost-device", t.Cancel = "cancel-mfa-disable", t))(G || {});
var H = ((r8) => (r8.Harmony = "HARMONY", r8))(H || {});
var q = ((r8) => (r8.ClosedByUser = "closed-by-user", r8))(q || {});
var W = ((r8) => (r8.ClosedByUser = "closed-by-user-on-received", r8))(W || {});
var J = ((o) => (o.EnterNewPhoneNumber = "enter-new-phone-number", o.EnterOtpCode = "enter-otp-code", o.RecoveryFactorAlreadyExists = "recovery-factor-already-exists", o.MalformedPhoneNumber = "malformed-phone-number", o.InvalidOtpCode = "invalid-otp-code", o))(J || {});
var Y = ((n) => (n.SendNewPhoneNumber = "send-new-phone-number", n.SendOtpCode = "send-otp-code", n.Cancel = "cancel", n.StartEditPhoneNumber = "start-edit-phone-number", n))(Y || {});
var B = ((r8) => (r8.PhoneNumber = "phone_number", r8))(B || {});
var P = ((a) => (a.SmsOtpSent = "sms-otp-sent", a.LoginThrottled = "login-throttled", a.InvalidSmsOtp = "invalid-sms-otp", a.SmsVerified = "sms-verified", a.AccountRecovered = "account-recovered", a.UpdateEmailRequired = "update-email-required", a))(P || {});
var j = ((n) => (n.Cancel = "cancel", n.VerifyOtp = "verify-otp-code", n.ResendSms = "resend-sms-otp", n.UpdateEmail = "update-email", n))(j || {});
var Q = ((n) => (n.Success = "nft-checkout-success", n.Failure = "nft-checkout-failure", n.Initiated = "nft-checkout-initiated", n.Disconnect = "disconnect", n))(Q || {});
var X = ((r8) => (r8.WalletInfoFetched = "Wallet/wallet-info-fetched", r8))(X || {});
var z = ((r8) => (r8.CloseMagicWindow = "close-magic-window", r8))(z || {});

// node_modules/@magic-sdk/provider/dist/es/index.mjs
var zt = Object.create;
var Ce = Object.defineProperty;
var Yt = Object.getOwnPropertyDescriptor;
var Qt = Object.getOwnPropertyNames;
var Zt = Object.getPrototypeOf;
var er = Object.prototype.hasOwnProperty;
var tr = (r8, e) => () => (e || r8((e = { exports: {} }).exports, e), e.exports);
var rr = (r8, e) => {
  for (var t in e) Ce(r8, t, { get: e[t], enumerable: true });
};
var nr = (r8, e, t, s) => {
  if (e && typeof e == "object" || typeof e == "function") for (let n of Qt(e)) !er.call(r8, n) && n !== t && Ce(r8, n, { get: () => e[n], enumerable: !(s = Yt(e, n)) || s.enumerable });
  return r8;
};
var sr = (r8, e, t) => (t = r8 != null ? zt(Zt(r8)) : {}, nr(e || !r8 || !r8.__esModule ? Ce(t, "default", { value: r8, enumerable: true }) : t, r8));
var Nt = tr((ls, ke) => {
  "use strict";
  var pn = Object.prototype.hasOwnProperty, I2 = "~";
  function se() {
  }
  Object.create && (se.prototype = /* @__PURE__ */ Object.create(null), new se().__proto__ || (I2 = false));
  function mn(r8, e, t) {
    this.fn = r8, this.context = e, this.once = t || false;
  }
  function Mt(r8, e, t, s, n) {
    if (typeof t != "function") throw new TypeError("The listener must be a function");
    var o = new mn(t, s || r8, n), i = I2 ? I2 + e : e;
    return r8._events[i] ? r8._events[i].fn ? r8._events[i] = [r8._events[i], o] : r8._events[i].push(o) : (r8._events[i] = o, r8._eventsCount++), r8;
  }
  function fe(r8, e) {
    --r8._eventsCount === 0 ? r8._events = new se() : delete r8._events[e];
  }
  function v2() {
    this._events = new se(), this._eventsCount = 0;
  }
  v2.prototype.eventNames = function() {
    var e = [], t, s;
    if (this._eventsCount === 0) return e;
    for (s in t = this._events) pn.call(t, s) && e.push(I2 ? s.slice(1) : s);
    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(t)) : e;
  };
  v2.prototype.listeners = function(e) {
    var t = I2 ? I2 + e : e, s = this._events[t];
    if (!s) return [];
    if (s.fn) return [s.fn];
    for (var n = 0, o = s.length, i = new Array(o); n < o; n++) i[n] = s[n].fn;
    return i;
  };
  v2.prototype.listenerCount = function(e) {
    var t = I2 ? I2 + e : e, s = this._events[t];
    return s ? s.fn ? 1 : s.length : 0;
  };
  v2.prototype.emit = function(e, t, s, n, o, i) {
    var a = I2 ? I2 + e : e;
    if (!this._events[a]) return false;
    var c = this._events[a], d = arguments.length, l, u2;
    if (c.fn) {
      switch (c.once && this.removeListener(e, c.fn, void 0, true), d) {
        case 1:
          return c.fn.call(c.context), true;
        case 2:
          return c.fn.call(c.context, t), true;
        case 3:
          return c.fn.call(c.context, t, s), true;
        case 4:
          return c.fn.call(c.context, t, s, n), true;
        case 5:
          return c.fn.call(c.context, t, s, n, o), true;
        case 6:
          return c.fn.call(c.context, t, s, n, o, i), true;
      }
      for (u2 = 1, l = new Array(d - 1); u2 < d; u2++) l[u2 - 1] = arguments[u2];
      c.fn.apply(c.context, l);
    } else {
      var P2 = c.length, w2;
      for (u2 = 0; u2 < P2; u2++) switch (c[u2].once && this.removeListener(e, c[u2].fn, void 0, true), d) {
        case 1:
          c[u2].fn.call(c[u2].context);
          break;
        case 2:
          c[u2].fn.call(c[u2].context, t);
          break;
        case 3:
          c[u2].fn.call(c[u2].context, t, s);
          break;
        case 4:
          c[u2].fn.call(c[u2].context, t, s, n);
          break;
        default:
          if (!l) for (w2 = 1, l = new Array(d - 1); w2 < d; w2++) l[w2 - 1] = arguments[w2];
          c[u2].fn.apply(c[u2].context, l);
      }
    }
    return true;
  };
  v2.prototype.on = function(e, t, s) {
    return Mt(this, e, t, s, false);
  };
  v2.prototype.once = function(e, t, s) {
    return Mt(this, e, t, s, true);
  };
  v2.prototype.removeListener = function(e, t, s, n) {
    var o = I2 ? I2 + e : e;
    if (!this._events[o]) return this;
    if (!t) return fe(this, o), this;
    var i = this._events[o];
    if (i.fn) i.fn === t && (!n || i.once) && (!s || i.context === s) && fe(this, o);
    else {
      for (var a = 0, c = [], d = i.length; a < d; a++) (i[a].fn !== t || n && !i[a].once || s && i[a].context !== s) && c.push(i[a]);
      c.length ? this._events[o] = c.length === 1 ? c[0] : c : fe(this, o);
    }
    return this;
  };
  v2.prototype.removeAllListeners = function(e) {
    var t;
    return e ? (t = I2 ? I2 + e : e, this._events[t] && fe(this, t)) : (this._events = new se(), this._eventsCount = 0), this;
  };
  v2.prototype.off = v2.prototype.removeListener;
  v2.prototype.addListener = v2.prototype.on;
  v2.prefixed = I2;
  v2.EventEmitter = v2;
  typeof ke < "u" && (ke.exports = v2);
});
function or(r8) {
  let e = { exports: {} };
  return r8(e, e.exports), e.exports;
}
var ir = Number.MAX_SAFE_INTEGER || 9007199254740991;
var $e = { SEMVER_SPEC_VERSION: "2.0.0", MAX_LENGTH: 256, MAX_SAFE_INTEGER: ir, MAX_SAFE_COMPONENT_LENGTH: 16 };
var ar = typeof process == "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...r8) => console.error("SEMVER", ...r8) : () => {
};
var h2 = ar;
var ee = or(function(r8, e) {
  let { MAX_SAFE_COMPONENT_LENGTH: t } = $e, s = (e = r8.exports = {}).re = [], n = e.src = [], o = e.t = {}, i = 0, a = (c, d, l) => {
    let u2 = i++;
    h2(u2, d), o[c] = u2, n[u2] = d, s[u2] = new RegExp(d, l ? "g" : void 0);
  };
  a("NUMERICIDENTIFIER", "0|[1-9]\\d*"), a("NUMERICIDENTIFIERLOOSE", "[0-9]+"), a("NONNUMERICIDENTIFIER", "\\d*[a-zA-Z-][a-zA-Z0-9-]*"), a("MAINVERSION", `(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})`), a("MAINVERSIONLOOSE", `(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})`), a("PRERELEASEIDENTIFIER", `(?:${n[o.NUMERICIDENTIFIER]}|${n[o.NONNUMERICIDENTIFIER]})`), a("PRERELEASEIDENTIFIERLOOSE", `(?:${n[o.NUMERICIDENTIFIERLOOSE]}|${n[o.NONNUMERICIDENTIFIER]})`), a("PRERELEASE", `(?:-(${n[o.PRERELEASEIDENTIFIER]}(?:\\.${n[o.PRERELEASEIDENTIFIER]})*))`), a("PRERELEASELOOSE", `(?:-?(${n[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[o.PRERELEASEIDENTIFIERLOOSE]})*))`), a("BUILDIDENTIFIER", "[0-9A-Za-z-]+"), a("BUILD", `(?:\\+(${n[o.BUILDIDENTIFIER]}(?:\\.${n[o.BUILDIDENTIFIER]})*))`), a("FULLPLAIN", `v?${n[o.MAINVERSION]}${n[o.PRERELEASE]}?${n[o.BUILD]}?`), a("FULL", `^${n[o.FULLPLAIN]}$`), a("LOOSEPLAIN", `[v=\\s]*${n[o.MAINVERSIONLOOSE]}${n[o.PRERELEASELOOSE]}?${n[o.BUILD]}?`), a("LOOSE", `^${n[o.LOOSEPLAIN]}$`), a("GTLT", "((?:<|>)?=?)"), a("XRANGEIDENTIFIERLOOSE", `${n[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`), a("XRANGEIDENTIFIER", `${n[o.NUMERICIDENTIFIER]}|x|X|\\*`), a("XRANGEPLAIN", `[v=\\s]*(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:${n[o.PRERELEASE]})?${n[o.BUILD]}?)?)?`), a("XRANGEPLAINLOOSE", `[v=\\s]*(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:${n[o.PRERELEASELOOSE]})?${n[o.BUILD]}?)?)?`), a("XRANGE", `^${n[o.GTLT]}\\s*${n[o.XRANGEPLAIN]}$`), a("XRANGELOOSE", `^${n[o.GTLT]}\\s*${n[o.XRANGEPLAINLOOSE]}$`), a("COERCE", `(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`), a("COERCERTL", n[o.COERCE], true), a("LONETILDE", "(?:~>?)"), a("TILDETRIM", `(\\s*)${n[o.LONETILDE]}\\s+`, true), e.tildeTrimReplace = "$1~", a("TILDE", `^${n[o.LONETILDE]}${n[o.XRANGEPLAIN]}$`), a("TILDELOOSE", `^${n[o.LONETILDE]}${n[o.XRANGEPLAINLOOSE]}$`), a("LONECARET", "(?:\\^)"), a("CARETTRIM", `(\\s*)${n[o.LONECARET]}\\s+`, true), e.caretTrimReplace = "$1^", a("CARET", `^${n[o.LONECARET]}${n[o.XRANGEPLAIN]}$`), a("CARETLOOSE", `^${n[o.LONECARET]}${n[o.XRANGEPLAINLOOSE]}$`), a("COMPARATORLOOSE", `^${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]})$|^$`), a("COMPARATOR", `^${n[o.GTLT]}\\s*(${n[o.FULLPLAIN]})$|^$`), a("COMPARATORTRIM", `(\\s*)${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]}|${n[o.XRANGEPLAIN]})`, true), e.comparatorTrimReplace = "$1$2$3", a("HYPHENRANGE", `^\\s*(${n[o.XRANGEPLAIN]})\\s+-\\s+(${n[o.XRANGEPLAIN]})\\s*$`), a("HYPHENRANGELOOSE", `^\\s*(${n[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[o.XRANGEPLAINLOOSE]})\\s*$`), a("STAR", "(<|>)?=?\\s*\\*"), a("GTE0", "^\\s*>=\\s*0.0.0\\s*$"), a("GTE0PRE", "^\\s*>=\\s*0.0.0-0\\s*$");
});
var Xe = /^[0-9]+$/;
var st = (r8, e) => {
  let t = Xe.test(r8), s = Xe.test(e);
  return t && s && (r8 = +r8, e = +e), r8 === e ? 0 : t && !s ? -1 : s && !t ? 1 : r8 < e ? -1 : 1;
};
var cr = (r8, e) => st(e, r8);
var lr = { compareIdentifiers: st, rcompareIdentifiers: cr };
var { MAX_LENGTH: ze, MAX_SAFE_INTEGER: ie } = $e;
var { re: Ye, t: Qe } = ee;
var { compareIdentifiers: z2 } = lr;
var M = class r {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof r) {
      if (e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease) return e;
      e = e.version;
    } else if (typeof e != "string") throw new TypeError(`Invalid Version: ${e}`);
    if (e.length > ze) throw new TypeError(`version is longer than ${ze} characters`);
    h2("SemVer", e, t), this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease;
    let s = e.trim().match(t.loose ? Ye[Qe.LOOSE] : Ye[Qe.FULL]);
    if (!s) throw new TypeError(`Invalid Version: ${e}`);
    if (this.raw = e, this.major = +s[1], this.minor = +s[2], this.patch = +s[3], this.major > ie || this.major < 0) throw new TypeError("Invalid major version");
    if (this.minor > ie || this.minor < 0) throw new TypeError("Invalid minor version");
    if (this.patch > ie || this.patch < 0) throw new TypeError("Invalid patch version");
    s[4] ? this.prerelease = s[4].split(".").map((n) => {
      if (/^[0-9]+$/.test(n)) {
        let o = +n;
        if (o >= 0 && o < ie) return o;
      }
      return n;
    }) : this.prerelease = [], this.build = s[5] ? s[5].split(".") : [], this.format();
  }
  format() {
    return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(".")}`), this.version;
  }
  toString() {
    return this.version;
  }
  compare(e) {
    if (h2("SemVer.compare", this.version, this.options, e), !(e instanceof r)) {
      if (typeof e == "string" && e === this.version) return 0;
      e = new r(e, this.options);
    }
    return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);
  }
  compareMain(e) {
    return e instanceof r || (e = new r(e, this.options)), z2(this.major, e.major) || z2(this.minor, e.minor) || z2(this.patch, e.patch);
  }
  comparePre(e) {
    if (e instanceof r || (e = new r(e, this.options)), this.prerelease.length && !e.prerelease.length) return -1;
    if (!this.prerelease.length && e.prerelease.length) return 1;
    if (!this.prerelease.length && !e.prerelease.length) return 0;
    let t = 0;
    do {
      let s = this.prerelease[t], n = e.prerelease[t];
      if (h2("prerelease compare", t, s, n), s === void 0 && n === void 0) return 0;
      if (n === void 0) return 1;
      if (s === void 0) return -1;
      if (s !== n) return z2(s, n);
    } while (++t);
  }
  compareBuild(e) {
    e instanceof r || (e = new r(e, this.options));
    let t = 0;
    do {
      let s = this.build[t], n = e.build[t];
      if (h2("prerelease compare", t, s, n), s === void 0 && n === void 0) return 0;
      if (n === void 0) return 1;
      if (s === void 0) return -1;
      if (s !== n) return z2(s, n);
    } while (++t);
  }
  inc(e, t) {
    switch (e) {
      case "premajor":
        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", t);
        break;
      case "preminor":
        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", t);
        break;
      case "prepatch":
        this.prerelease.length = 0, this.inc("patch", t), this.inc("pre", t);
        break;
      case "prerelease":
        this.prerelease.length === 0 && this.inc("patch", t), this.inc("pre", t);
        break;
      case "major":
        this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
        break;
      case "minor":
        this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];
        break;
      case "patch":
        this.prerelease.length === 0 && this.patch++, this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0) this.prerelease = [0];
        else {
          let s = this.prerelease.length;
          for (; --s >= 0; ) typeof this.prerelease[s] == "number" && (this.prerelease[s]++, s = -2);
          s === -1 && this.prerelease.push(0);
        }
        t && (this.prerelease[0] === t ? isNaN(this.prerelease[1]) && (this.prerelease = [t, 0]) : this.prerelease = [t, 0]);
        break;
      default:
        throw new Error(`invalid increment argument: ${e}`);
    }
    return this.format(), this.raw = this.version, this;
  }
};
var dr = (r8, e, t) => new M(r8, t).compare(new M(e, t));
var J2 = dr;
var ur = (r8, e, t) => J2(r8, e, t) === 0;
var pr = ur;
var mr = (r8, e, t) => J2(r8, e, t) !== 0;
var hr = mr;
var Er = (r8, e, t) => J2(r8, e, t) > 0;
var fr = Er;
var gr = (r8, e, t) => J2(r8, e, t) >= 0;
var yr = gr;
var Rr = (r8, e, t) => J2(r8, e, t) < 0;
var vr = Rr;
var Tr = (r8, e, t) => J2(r8, e, t) <= 0;
var Ir = Tr;
var br = (r8, e, t, s) => {
  switch (e) {
    case "===":
      return typeof r8 == "object" && (r8 = r8.version), typeof t == "object" && (t = t.version), r8 === t;
    case "!==":
      return typeof r8 == "object" && (r8 = r8.version), typeof t == "object" && (t = t.version), r8 !== t;
    case "":
    case "=":
    case "==":
      return pr(r8, t, s);
    case "!=":
      return hr(r8, t, s);
    case ">":
      return fr(r8, t, s);
    case ">=":
      return yr(r8, t, s);
    case "<":
      return vr(r8, t, s);
    case "<=":
      return Ir(r8, t, s);
    default:
      throw new TypeError(`Invalid operator: ${e}`);
  }
};
var Ae = br;
var Y2 = Symbol("SemVer ANY");
var Q2 = class r2 {
  static get ANY() {
    return Y2;
  }
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof r2) {
      if (e.loose === !!t.loose) return e;
      e = e.value;
    }
    h2("comparator", e, t), this.options = t, this.loose = !!t.loose, this.parse(e), this.semver === Y2 ? this.value = "" : this.value = this.operator + this.semver.version, h2("comp", this);
  }
  parse(e) {
    let t = this.options.loose ? Ze[et.COMPARATORLOOSE] : Ze[et.COMPARATOR], s = e.match(t);
    if (!s) throw new TypeError(`Invalid comparator: ${e}`);
    this.operator = s[1] !== void 0 ? s[1] : "", this.operator === "=" && (this.operator = ""), s[2] ? this.semver = new M(s[2], this.options.loose) : this.semver = Y2;
  }
  toString() {
    return this.value;
  }
  test(e) {
    if (h2("Comparator.test", e, this.options.loose), this.semver === Y2 || e === Y2) return true;
    if (typeof e == "string") try {
      e = new M(e, this.options);
    } catch {
      return false;
    }
    return Ae(e, this.operator, this.semver, this.options);
  }
  intersects(e, t) {
    if (!(e instanceof r2)) throw new TypeError("a Comparator is required");
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), this.operator === "") return this.value === "" || new Z2(e.value, t).test(this.value);
    if (e.operator === "") return e.value === "" || new Z2(this.value, t).test(e.semver);
    let s = !(this.operator !== ">=" && this.operator !== ">" || e.operator !== ">=" && e.operator !== ">"), n = !(this.operator !== "<=" && this.operator !== "<" || e.operator !== "<=" && e.operator !== "<"), o = this.semver.version === e.semver.version, i = !(this.operator !== ">=" && this.operator !== "<=" || e.operator !== ">=" && e.operator !== "<="), a = Ae(this.semver, "<", e.semver, t) && (this.operator === ">=" || this.operator === ">") && (e.operator === "<=" || e.operator === "<"), c = Ae(this.semver, ">", e.semver, t) && (this.operator === "<=" || this.operator === "<") && (e.operator === ">=" || e.operator === ">");
    return s || n || o && i || a || c;
  }
};
var { re: Ze, t: et } = ee;
var Z2 = class r3 {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof r3) return e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease ? e : new r3(e.raw, t);
    if (e instanceof Q2) return this.raw = e.value, this.set = [[e]], this.format(), this;
    if (this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease, this.raw = e, this.set = e.split(/\s*\|\|\s*/).map((s) => this.parseRange(s.trim())).filter((s) => s.length), !this.set.length) throw new TypeError(`Invalid SemVer Range: ${e}`);
    this.format();
  }
  format() {
    return this.range = this.set.map((e) => e.join(" ").trim()).join("||").trim(), this.range;
  }
  toString() {
    return this.range;
  }
  parseRange(e) {
    let { loose: t } = this.options;
    e = e.trim();
    let s = t ? y2[E2.HYPHENRANGELOOSE] : y2[E2.HYPHENRANGE];
    e = e.replace(s, kr(this.options.includePrerelease)), h2("hyphen replace", e), e = e.replace(y2[E2.COMPARATORTRIM], Pr), h2("comparator trim", e, y2[E2.COMPARATORTRIM]), e = (e = (e = e.replace(y2[E2.TILDETRIM], wr)).replace(y2[E2.CARETTRIM], Sr)).split(/\s+/).join(" ");
    let n = t ? y2[E2.COMPARATORLOOSE] : y2[E2.COMPARATOR];
    return e.split(" ").map((o) => xr(o, this.options)).join(" ").split(/\s+/).map((o) => _r(o, this.options)).filter(this.options.loose ? (o) => !!o.match(n) : () => true).map((o) => new Q2(o, this.options));
  }
  intersects(e, t) {
    if (!(e instanceof r3)) throw new TypeError("a Range is required");
    return this.set.some((s) => tt(s, t) && e.set.some((n) => tt(n, t) && s.every((o) => n.every((i) => o.intersects(i, t)))));
  }
  test(e) {
    if (!e) return false;
    if (typeof e == "string") try {
      e = new M(e, this.options);
    } catch {
      return false;
    }
    for (let t = 0; t < this.set.length; t++) if (Dr(this.set[t], e, this.options)) return true;
    return false;
  }
};
var { re: y2, t: E2, comparatorTrimReplace: Pr, tildeTrimReplace: wr, caretTrimReplace: Sr } = ee;
var tt = (r8, e) => {
  let t = true, s = r8.slice(), n = s.pop();
  for (; t && s.length; ) t = s.every((o) => n.intersects(o, e)), n = s.pop();
  return t;
};
var xr = (r8, e) => (h2("comp", r8, e), r8 = Cr(r8, e), h2("caret", r8), r8 = Mr(r8, e), h2("tildes", r8), r8 = $r(r8, e), h2("xrange", r8), r8 = Or(r8, e), h2("stars", r8), r8);
var T2 = (r8) => !r8 || r8.toLowerCase() === "x" || r8 === "*";
var Mr = (r8, e) => r8.trim().split(/\s+/).map((t) => Nr(t, e)).join(" ");
var Nr = (r8, e) => {
  let t = e.loose ? y2[E2.TILDELOOSE] : y2[E2.TILDE];
  return r8.replace(t, (s, n, o, i, a) => {
    let c;
    return h2("tilde", r8, s, n, o, i, a), T2(n) ? c = "" : T2(o) ? c = `>=${n}.0.0 <${+n + 1}.0.0-0` : T2(i) ? c = `>=${n}.${o}.0 <${n}.${+o + 1}.0-0` : a ? (h2("replaceTilde pr", a), c = `>=${n}.${o}.${i}-${a} <${n}.${+o + 1}.0-0`) : c = `>=${n}.${o}.${i} <${n}.${+o + 1}.0-0`, h2("tilde return", c), c;
  });
};
var Cr = (r8, e) => r8.trim().split(/\s+/).map((t) => Ar(t, e)).join(" ");
var Ar = (r8, e) => {
  h2("caret", r8, e);
  let t = e.loose ? y2[E2.CARETLOOSE] : y2[E2.CARET], s = e.includePrerelease ? "-0" : "";
  return r8.replace(t, (n, o, i, a, c) => {
    let d;
    return h2("caret", r8, n, o, i, a, c), T2(o) ? d = "" : T2(i) ? d = `>=${o}.0.0${s} <${+o + 1}.0.0-0` : T2(a) ? d = o === "0" ? `>=${o}.${i}.0${s} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.0${s} <${+o + 1}.0.0-0` : c ? (h2("replaceCaret pr", c), d = o === "0" ? i === "0" ? `>=${o}.${i}.${a}-${c} <${o}.${i}.${+a + 1}-0` : `>=${o}.${i}.${a}-${c} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.${a}-${c} <${+o + 1}.0.0-0`) : (h2("no pr"), d = o === "0" ? i === "0" ? `>=${o}.${i}.${a}${s} <${o}.${i}.${+a + 1}-0` : `>=${o}.${i}.${a}${s} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.${a} <${+o + 1}.0.0-0`), h2("caret return", d), d;
  });
};
var $r = (r8, e) => (h2("replaceXRanges", r8, e), r8.split(/\s+/).map((t) => Lr(t, e)).join(" "));
var Lr = (r8, e) => {
  r8 = r8.trim();
  let t = e.loose ? y2[E2.XRANGELOOSE] : y2[E2.XRANGE];
  return r8.replace(t, (s, n, o, i, a, c) => {
    h2("xRange", r8, s, n, o, i, a, c);
    let d = T2(o), l = d || T2(i), u2 = l || T2(a), P2 = u2;
    return n === "=" && P2 && (n = ""), c = e.includePrerelease ? "-0" : "", d ? s = n === ">" || n === "<" ? "<0.0.0-0" : "*" : n && P2 ? (l && (i = 0), a = 0, n === ">" ? (n = ">=", l ? (o = +o + 1, i = 0, a = 0) : (i = +i + 1, a = 0)) : n === "<=" && (n = "<", l ? o = +o + 1 : i = +i + 1), n === "<" && (c = "-0"), s = `${n + o}.${i}.${a}${c}`) : l ? s = `>=${o}.0.0${c} <${+o + 1}.0.0-0` : u2 && (s = `>=${o}.${i}.0${c} <${o}.${+i + 1}.0-0`), h2("xRange return", s), s;
  });
};
var Or = (r8, e) => (h2("replaceStars", r8, e), r8.trim().replace(y2[E2.STAR], ""));
var _r = (r8, e) => (h2("replaceGTE0", r8, e), r8.trim().replace(y2[e.includePrerelease ? E2.GTE0PRE : E2.GTE0], ""));
var kr = (r8) => (e, t, s, n, o, i, a, c, d, l, u2, P2, w2) => `${t = T2(s) ? "" : T2(n) ? `>=${s}.0.0${r8 ? "-0" : ""}` : T2(o) ? `>=${s}.${n}.0${r8 ? "-0" : ""}` : i ? `>=${t}` : `>=${t}${r8 ? "-0" : ""}`} ${c = T2(d) ? "" : T2(l) ? `<${+d + 1}.0.0-0` : T2(u2) ? `<${d}.${+l + 1}.0-0` : P2 ? `<=${d}.${l}.${u2}-${P2}` : r8 ? `<${d}.${l}.${+u2 + 1}-0` : `<=${c}`}`.trim();
var Dr = (r8, e, t) => {
  for (let s = 0; s < r8.length; s++) if (!r8[s].test(e)) return false;
  if (e.prerelease.length && !t.includePrerelease) {
    for (let s = 0; s < r8.length; s++) if (h2(r8[s].semver), r8[s].semver !== Q2.ANY && r8[s].semver.prerelease.length > 0) {
      let n = r8[s].semver;
      if (n.major === e.major && n.minor === e.minor && n.patch === e.patch) return true;
    }
    return false;
  }
  return true;
};
var ot = (r8, e, t) => {
  try {
    e = new Z2(e, t);
  } catch {
    return false;
  }
  return e.test(r8);
};
var { MAX_LENGTH: qr } = $e;
var { re: rt, t: nt } = ee;
var Ur = (r8, e) => {
  if (e && typeof e == "object" || (e = { loose: !!e, includePrerelease: false }), r8 instanceof M) return r8;
  if (typeof r8 != "string" || r8.length > qr || !(e.loose ? rt[nt.LOOSE] : rt[nt.FULL]).test(r8)) return null;
  try {
    return new M(r8, e);
  } catch {
    return null;
  }
};
var Fr = Ur;
var { re: ae, t: ce } = ee;
var it = (r8, e) => {
  if (r8 instanceof M) return r8;
  if (typeof r8 == "number" && (r8 = String(r8)), typeof r8 != "string") return null;
  let t = null;
  if ((e = e || {}).rtl) {
    let s;
    for (; (s = ae[ce.COERCERTL].exec(r8)) && (!t || t.index + t[0].length !== r8.length); ) t && s.index + s[0].length === t.index + t[0].length || (t = s), ae[ce.COERCERTL].lastIndex = s.index + s[1].length + s[2].length;
    ae[ce.COERCERTL].lastIndex = -1;
  } else t = r8.match(ae[ce.COERCE]);
  return t === null ? null : Fr(`${t[2]}.${t[3] || "0"}.${t[4] || "0"}`, e);
};
function Wr(r8) {
  return String.fromCharCode(parseInt(r8.slice(1), 16));
}
function Jr(r8) {
  return `%${`00${r8.charCodeAt(0).toString(16)}`.slice(-2)}`;
}
function Gr(r8) {
  return btoa(encodeURIComponent(r8).replace(/%[0-9A-F]{2}/g, Wr));
}
function Kr(r8) {
  return decodeURIComponent(Array.from(atob(r8), Jr).join(""));
}
function le(r8) {
  return Gr(JSON.stringify(r8));
}
function at(r8) {
  return JSON.parse(Kr(r8));
}
function C2(r8) {
  return typeof r8 > "u";
}
function Br(r8) {
  return r8 === null;
}
function de(r8) {
  return Br(r8) || C2(r8);
}
function ct(r8) {
  return de(r8) ? false : !C2(r8.jsonrpc) && !C2(r8.id) && (!C2(r8.result) || !C2(r8.error));
}
function lt(r8) {
  return de(r8) ? false : typeof r8 == "number" && Object.values(u).includes(r8);
}
function te(r8) {
  if (!r8) return true;
  for (let e in r8) if (Object.hasOwnProperty.call(r8, e)) return false;
  return true;
}
var m2 = {};
function Hr(r8, e) {
  return Object.assign(m2, e), r8;
}
var dt = { "magic-sdk": "magic-sdk", "@magic-sdk/react-native": "magic-sdk-rn", "@magic-sdk/react-native-bare": "magic-sdk-rn-bare", "@magic-sdk/react-native-expo": "magic-sdk-rn-expo" };
var $ = class r4 extends Error {
  constructor(t, s) {
    super(`Magic SDK Error: [${t}] ${s}`);
    __publicField(this, "__proto__", Error);
    this.code = t;
    this.rawMessage = s;
    Object.setPrototypeOf(this, r4.prototype);
  }
};
var U2 = class r5 extends Error {
  constructor(e) {
    super();
    __publicField(this, "__proto__", Error);
    __publicField(this, "code");
    __publicField(this, "rawMessage");
    __publicField(this, "data");
    let t = Number(e == null ? void 0 : e.code);
    this.rawMessage = (e == null ? void 0 : e.message) || "Internal error", this.code = lt(t) ? t : u.InternalError, this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`, this.data = (e == null ? void 0 : e.data) || void 0, Object.setPrototypeOf(this, r5.prototype);
  }
};
var L2 = class {
  constructor(e, t) {
    __publicField(this, "message");
    this.code = e;
    this.rawMessage = t;
    this.message = `Magic SDK Warning: [${e}] ${t}`;
  }
  log() {
    console.warn(this.message);
  }
};
var ue = class r6 extends Error {
  constructor(t, s, n, o) {
    super(`Magic Extension Error (${t.name}): [${s}] ${n}`);
    __publicField(this, "__proto__", Error);
    this.code = s;
    this.rawMessage = n;
    this.data = o;
    Object.setPrototypeOf(this, r6.prototype);
  }
};
var re = class {
  constructor(e, t, s) {
    __publicField(this, "message");
    this.code = t;
    this.rawMessage = s;
    this.message = `Magic Extension Warning (${e.name}): [${t}] ${s}`;
  }
  log() {
    console.warn(this.message);
  }
};
function ut() {
  return new $(m.MissingApiKey, "Please provide an API key that you acquired from the Magic developer dashboard.");
}
function pt() {
  return new $(m.ModalNotReady, "Modal is not ready");
}
function mt() {
  return new $(m.MalformedResponse, "Response from the Magic iframe is malformed.");
}
function ht(r8) {
  return new $(m.ExtensionNotInitialized, `Extensions must be initialized with a Magic SDK instance before \`Extension.${r8}\` can be accessed. Do not invoke \`Extension.${r8}\` inside an extension constructor.`);
}
function Et(r8) {
  let e = `Some extensions are incompatible with \`${m2.sdkName}@${m2.version}\`:`;
  return r8.filter((t) => typeof t.compat < "u" && t.compat !== null).forEach((t) => {
    let s = t.compat[m2.sdkName];
    typeof s == "string" ? e += `
  - Extension \`${t.name}\` supports version(s) \`${s}\`` : s || (e += `
  - Extension \`${t.name}\` does not support ${m2.platform} environments.`);
  }), new $(m.IncompatibleExtensions, e);
}
function ft(r8) {
  let e = (t) => {
    let s = t + 1, n = s % 10, o = s % 100;
    return n === 1 && o !== 11 ? `${s}st` : n === 2 && o !== 12 ? `${s}nd` : n === 3 && o !== 13 ? `${s}rd` : `${s}th`;
  };
  return new $(m.InvalidArgument, `Invalid ${e(r8.argument)} argument given to \`${r8.procedure}\`.
  Expected: \`${r8.expected}\`
  Received: \`${r8.received}\``);
}
function Bn() {
  return new L2(v.DuplicateIframe, "Duplicate iframes found.");
}
function gt() {
  return new L2(v.SyncWeb3Method, "Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");
}
function yt() {
  return new L2(v.ReactNativeEndpointConfiguration, `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${m2.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`);
}
function Rt(r8) {
  let { method: e, removalVersions: t, useInstead: s } = r8, n = t[m2.sdkName], o = s ? ` Use \`${s}\` instead.` : "", i = `\`${e}\` will be removed from \`${m2.sdkName}\` in version \`${n}\`.${o}`;
  return new L2(v.DeprecationNotice, i);
}
function* zr() {
  let r8 = 0;
  for (; ; ) r8 < Number.MAX_SAFE_INTEGER ? yield ++r8 : r8 = 0;
}
var Yr = zr();
function Le() {
  return Yr.next().value;
}
var he = {};
rr(he, { clear: () => Qr, getItem: () => R2, iterate: () => Oe, key: () => en, keys: () => tn, length: () => Zr, removeItem: () => A2, setItem: () => S2 });
var me;
function O2(r8) {
  return async (...e) => (me || (me = await m2.configureStorage()), await me.ready(), me[r8](...e));
}
var R2 = O2("getItem");
var S2 = O2("setItem");
var A2 = O2("removeItem");
var Qr = O2("clear");
var Zr = O2("length");
var en = O2("key");
var tn = O2("keys");
var Oe = O2("iterate");
function vt() {
  let r8 = window.crypto.getRandomValues(new Uint8Array(16));
  r8[6] = r8[6] & 15 | 64, r8[8] = r8[8] & 191 | 128;
  let e = "";
  return e += r8[0].toString(16), e += r8[1].toString(16), e += r8[2].toString(16), e += r8[3].toString(16), e += "-", e += r8[4].toString(16), e += r8[5].toString(16), e += "-", e += r8[6].toString(16), e += r8[7].toString(16), e += "-", e += r8[8].toString(16), e += r8[9].toString(16), e += "-", e += r8[10].toString(16), e += r8[11].toString(16), e += r8[12].toString(16), e += r8[13].toString(16), e += r8[14].toString(16), e += r8[15].toString(16), e;
}
var _e = "STORE_KEY_PRIVATE_KEY";
var Ee = "STORE_KEY_PUBLIC_JWK";
var It = "ECDSA";
var rn = "P-256";
var nn = { name: It, namedCurve: rn };
function ne() {
  let r8 = typeof window < "u" && !!window.crypto, e = r8 && !!window.crypto.subtle;
  return r8 && e;
}
function bt() {
  A2(Ee), A2(_e);
}
async function Pt() {
  let r8 = await sn();
  if (!r8) {
    console.info("unable to create public key or webcrypto is unsupported");
    return;
  }
  let { subtle: e } = window.crypto, t = await R2(_e);
  if (!t || !e) {
    console.info("unable to find private key or webcrypto unsupported");
    return;
  }
  let s = { iat: Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3), jti: vt() }, o = { protected: Tt(JSON.stringify({ typ: "dpop+jwt", alg: "ES256", jwk: r8 })), claims: Tt(JSON.stringify(s)) }, i = an(`${o.protected}.${o.claims}`), a = { name: It, hash: { name: "SHA-256" } }, c = ln(new Uint8Array(await e.sign(a, t, i)));
  return `${o.protected}.${o.claims}.${c}`;
}
async function sn() {
  if (!ne()) {
    console.info("webcrypto is not supported");
    return;
  }
  return await R2(Ee) || await on(), R2(Ee);
}
async function on() {
  let { subtle: r8 } = window.crypto, e = await r8.generateKey(nn, false, ["sign"]), t = await r8.exportKey("jwk", e.publicKey);
  await S2(_e, e.privateKey), await S2(Ee, t);
}
function Tt(r8) {
  return wt(cn(r8));
}
function an(r8) {
  return new TextEncoder().encode(r8);
}
function wt(r8) {
  return btoa(r8).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+/g, "");
}
function cn(r8) {
  return encodeURIComponent(r8).replace(/%([0-9A-F]{2})/g, (t, s) => String.fromCharCode(parseInt(s, 16)));
}
function ln(r8) {
  let e = "";
  return r8.forEach((t) => {
    e += String.fromCharCode(t);
  }), wt(e);
}
var St = Symbol("Payload pre-processed by Magic SDK");
function xt(r8) {
  return Object.defineProperty(r8, St, { value: true, enumerable: false }), r8;
}
function un(r8) {
  return !!r8[St];
}
function F2(r8) {
  return un(r8) || (r8.jsonrpc = r8.jsonrpc ?? "2.0", r8.id = Le(), r8.method = r8.method ?? "noop", r8.params = r8.params ?? [], xt(r8)), r8;
}
function p(r8, e = []) {
  return xt({ params: e, method: r8, jsonrpc: "2.0", id: Le() });
}
var K = class r7 {
  constructor(e) {
    __publicField(this, "_jsonrpc");
    __publicField(this, "_id");
    __publicField(this, "_result");
    __publicField(this, "_error");
    e instanceof r7 ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : ct(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);
  }
  applyError(e) {
    return this._error = e, this;
  }
  applyResult(e) {
    return this._result = e, this;
  }
  get hasError() {
    var _a3;
    return ((_a3 = this._error) == null ? void 0 : _a3.code) === u.DpopInvalidated && bt(), typeof this._error < "u" && this._error !== null;
  }
  get hasResult() {
    return typeof this._result < "u";
  }
  get payload() {
    return { jsonrpc: this._jsonrpc, id: this._id, result: this._result, error: this._error };
  }
};
var Ct = sr(Nt());
var De = class extends Ct.default {
};
function ge() {
  let r8 = new De();
  return { emitter: r8, createChainingEmitterMethod: (s, n) => (...o) => (r8[s].apply(r8, o), n), createBoundEmitterMethod: (s) => (...n) => r8[s].apply(r8, n) };
}
var At = Symbol("isPromiEvent");
function $t(r8) {
  return !!r8[At];
}
function b2(r8) {
  let e = qe(r8), { createBoundEmitterMethod: t, createChainingEmitterMethod: s } = ge(), n = Symbol("Promise.then"), o = Symbol("Promise.catch"), i = Symbol("Promise.finally"), a = (l, u2) => (...P2) => {
    let w2 = u2[l].apply(u2, P2);
    return c(w2);
  }, c = (l) => Object.assign(l, { [At]: true, [n]: l[n] || l.then, [o]: l[o] || l.catch, [i]: l[i] || l.finally, then: a(n, l), catch: a(o, l), finally: a(i, l), on: s("on", l), once: s("once", l), addListener: s("addListener", l), off: s("off", l), removeListener: s("removeListener", l), removeAllListeners: s("removeAllListeners", l), emit: t("emit"), eventNames: t("eventNames"), listeners: t("listeners"), listenerCount: t("listenerCount") }), d = c(e.then((l) => (d.emit("done", l), d.emit("settled"), l), (l) => {
    throw d.emit("error", l), d.emit("settled"), l;
  }));
  return d.on(W.ClosedByUser, () => {
    d.emit(q.ClosedByUser);
  }), d;
}
function qe(r8) {
  return new Promise((e, t) => {
    let s = r8(e, t);
    Promise.resolve(s).catch(t);
  });
}
var f2 = class {
  constructor(e) {
    this.sdk = e;
  }
  get overlay() {
    return this.sdk.overlay;
  }
  request(e) {
    if (this.sdk.thirdPartyWallets.isConnected && !Z.includes(e.method)) return b2((i, a) => {
      this.sdk.thirdPartyWallets.requestOverride(e).then(i).catch(a);
    });
    let t = this.overlay.post(x.MAGIC_HANDLE_REQUEST, F2(e)), s = b2((o, i) => {
      t.then((a) => {
        if (n(), a.hasError) i(new U2(a.payload.error));
        else if (a.hasResult) o(a.payload.result);
        else throw mt();
      }).catch((a) => {
        n(), i(a);
      });
    }), n = this.overlay.on(E.MAGIC_HANDLE_EVENT, (o) => {
      var _a3;
      let { response: i } = o.data;
      if (i.id === e.id && ((_a3 = i.result) == null ? void 0 : _a3.event)) {
        let { event: a, params: c = [] } = i.result;
        s.emit(a, ...c);
      }
    });
    return s;
  }
  createIntermediaryEvent(e, t) {
    return (n) => {
      let o = p(g.IntermediaryEvent, [{ payloadId: t, eventType: e, args: n }]);
      this.request(o);
    };
  }
};
function Lt(r8, e) {
  let [t] = r8.split(".").map(Number);
  return t >= e;
}
var vn = { "magic-sdk": "v18.0.0", "@magic-sdk/react-native": "v14.0.0", "@magic-sdk/react-native-bare": "v19.0.0", "@magic-sdk/react-native-expo": "v19.0.0" };
var Re = class extends f2 {
  loginWithMagicLink(e) {
    let t = m2.sdkName === "@magic-sdk/react-native" || m2.sdkName === "@magic-sdk/react-native-bare" || m2.sdkName === "@magic-sdk/react-native-expo";
    if (t && Lt(m2.version, 19)) throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");
    t && Rt({ method: "auth.loginWithMagicLink()", removalVersions: vn, useInstead: "auth.loginWithEmailOTP()" }).log();
    let { email: s, showUI: n = true, redirectURI: o, overrides: i, lifespan: a } = e, c = p(this.sdk.testMode ? g.LoginWithMagicLinkTestMode : g.LoginWithMagicLink, [{ email: s, showUI: n, redirectURI: o, overrides: i, lifespan: a }]);
    return this.request(c);
  }
  loginWithSMS(e) {
    let { phoneNumber: t, showUI: s = true, lifespan: n } = e, o = p(this.sdk.testMode ? g.LoginWithSmsTestMode : g.LoginWithSms, [{ phoneNumber: t, showUI: s, lifespan: n }]), i = this.request(o);
    return !s && i && (i.on(N.VerifySmsOtp, (a) => {
      this.createIntermediaryEvent(N.VerifySmsOtp, o.id)(a);
    }), i.on(N.Cancel, () => {
      this.createIntermediaryEvent(N.Cancel, o.id)();
    })), i;
  }
  loginWithEmailOTP(e) {
    let { email: t, showUI: s, deviceCheckUI: n, overrides: o, lifespan: i } = e, a = p(this.sdk.testMode ? g.LoginWithEmailOTPTestMode : g.LoginWithEmailOTP, [{ email: t, showUI: s, deviceCheckUI: n, overrides: o, lifespan: i }]), c = this.request(a);
    return !n && c && c.on(O.Retry, () => {
      this.createIntermediaryEvent(O.Retry, a.id)();
    }), !s && c && (c.on(R.VerifyEmailOtp, (d) => {
      this.createIntermediaryEvent(R.VerifyEmailOtp, a.id)(d);
    }), c.on(R.VerifyMFACode, (d) => {
      this.createIntermediaryEvent(R.VerifyMFACode, a.id)(d);
    }), c.on(R.LostDevice, () => {
      this.createIntermediaryEvent(R.LostDevice, a.id)();
    }), c.on(R.VerifyRecoveryCode, (d) => {
      this.createIntermediaryEvent(R.VerifyRecoveryCode, a.id)(d);
    }), c.on(R.Cancel, () => {
      this.createIntermediaryEvent(R.Cancel, a.id)();
    })), c;
  }
  loginWithCredential(e) {
    let { credentialOrQueryString: t, lifespan: s } = e || {}, n = t ?? "";
    if (!t && m2.platform === "web") {
      n = window.location.search;
      let i = window.location.origin + window.location.pathname;
      window.history.replaceState(null, "", i);
    }
    let o = p(this.sdk.testMode ? g.LoginWithCredentialTestMode : g.LoginWithCredential, [n, s]);
    return this.request(o);
  }
  setAuthorizationToken(e) {
    let t = p(g.SetAuthorizationToken, [{ jwt: e }]);
    return this.request(t);
  }
  updateEmailWithUI(e) {
    let { email: t, showUI: s = true } = e, n = p(this.sdk.testMode ? g.UpdateEmailTestMode : g.UpdateEmail, [{ email: t, showUI: s }]), o = this.request(n);
    return s || (o.on(b.Retry, () => {
      this.createIntermediaryEvent(b.Retry, n.id)();
    }), o.on(b.Cancel, () => {
      this.createIntermediaryEvent(b.Cancel, n.id)();
    }), o.on(b.VerifyEmailOtp, (i) => {
      this.createIntermediaryEvent(b.VerifyEmailOtp, n.id)(i);
    }), o.on(b.VerifyMFACode, (i) => {
      this.createIntermediaryEvent(b.VerifyMFACode, n.id)(i);
    }), o.on(F.RetryWithNewEmail, (i) => {
      this.createIntermediaryEvent(F.RetryWithNewEmail, n.id)(i);
    }), o.on(F.Cancel, () => {
      this.createIntermediaryEvent(F.Cancel, n.id)();
    }), o.on(F.VerifyEmailOtp, (i) => {
      this.createIntermediaryEvent(F.VerifyEmailOtp, n.id)(i);
    })), o;
  }
};
var Ue = "ds";
var Fe = "ek";
var We = "iv";
var Je = "AES-GCM";
var Tn = 256;
async function ve() {
  let r8 = [];
  await Oe((e, t, s) => {
    t.startsWith(`${Ue}_`) && r8.push(t);
  });
  for (let e of r8) await A2(e);
}
function _t(r8) {
  let e = "", t = new Uint8Array(r8), s = t.byteLength;
  for (let n = 0; n < s; n++) e += String.fromCharCode(t[n]);
  return window.btoa(e);
}
function kt(r8) {
  let e = window.atob(r8), t = e.length, s = new Uint8Array(t);
  for (let n = 0; n < t; n++) s[n] = e.charCodeAt(n);
  return s.buffer;
}
async function In() {
  if (!ne()) {
    console.info("webcrypto is not supported");
    return;
  }
  let { crypto: r8 } = window, e = await R2(We);
  return e || r8.getRandomValues(new Uint8Array(12));
}
async function bn() {
  if (!ne()) {
    console.info("webcrypto is not supported");
    return;
  }
  let { subtle: r8 } = window.crypto, e = await R2(Fe);
  return e || await r8.generateKey({ name: Je, length: Tn }, false, ["encrypt", "decrypt"]);
}
async function Dt(r8, e) {
  let t = await In(), s = await bn();
  if (!t || !s || !r8) return;
  let n = kt(r8), { subtle: o } = window.crypto, i = await o.encrypt({ name: Je, iv: t }, s, n), a = _t(i);
  await S2(`${Ue}_${e}`, a), await S2(Fe, s), await S2(We, t);
}
async function qt(r8) {
  let e = await R2(`${Ue}_${r8}`), t = await R2(We), s = await R2(Fe);
  if (!t || !e || !s || !ne()) return;
  let { subtle: n } = window.crypto, o = await n.decrypt({ name: Je, iv: t }, s, kt(e));
  return _t(o);
}
function Ge(r8, e) {
  return e ? new URL(r8, e) : new URL(r8);
}
var Ie = class extends f2 {
  constructor() {
    super(...arguments);
    __publicField(this, "localForageIsLoggedInKey", "magic_auth_is_logged_in");
    __publicField(this, "userLoggedOutCallbacks", []);
  }
  getIdToken(e) {
    let t = p(this.sdk.testMode ? g.GetIdTokenTestMode : g.GetIdToken, [e]);
    return this.request(t);
  }
  generateIdToken(e) {
    let t = p(this.sdk.testMode ? g.GenerateIdTokenTestMode : g.GenerateIdToken, [e]);
    return this.request(t);
  }
  getInfo() {
    let e = p(g.GetInfo, []);
    return this.request(e);
  }
  isLoggedIn() {
    return b2(async (e, t) => {
      try {
        let s = false;
        this.sdk.useStorageCache && (s = await R2(this.localForageIsLoggedInKey) === "true", s && e(true));
        let n = p(this.sdk.testMode ? g.IsLoggedInTestMode : g.IsLoggedIn), o = await this.request(n);
        this.sdk.useStorageCache && (o ? S2(this.localForageIsLoggedInKey, true) : A2(this.localForageIsLoggedInKey), s && !o && this.emitUserLoggedOut(true)), e(o);
      } catch (s) {
        t(s);
      }
    });
  }
  logout() {
    return A2(this.localForageIsLoggedInKey), ve(), b2(async (e, t) => {
      try {
        let s = p(this.sdk.testMode ? g.LogoutTestMode : g.Logout), n = await this.request(s);
        this.sdk.useStorageCache && this.emitUserLoggedOut(n), e(n);
      } catch (s) {
        t(s);
      }
    });
  }
  requestInfoWithUI(e) {
    let t = p(g.RequestUserInfoWithUI, e ? [e] : []);
    return this.request(t);
  }
  showSettings(e) {
    let { showUI: t = true } = e || {}, s = p(this.sdk.testMode ? g.UserSettingsTestMode : g.UserSettings, [e]), n = this.request(s);
    return !t && n && (n.on(Y.SendNewPhoneNumber, (o) => {
      this.createIntermediaryEvent(Y.SendNewPhoneNumber, s.id)(o);
    }), n.on(Y.SendOtpCode, (o) => {
      this.createIntermediaryEvent(Y.SendOtpCode, s.id)(o);
    }), n.on(Y.StartEditPhoneNumber, () => {
      this.createIntermediaryEvent(Y.StartEditPhoneNumber, s.id)();
    }), n.on(Y.Cancel, () => {
      this.createIntermediaryEvent(Y.Cancel, s.id)();
    }), n.on(b.VerifyEmailOtp, (o) => {
      this.createIntermediaryEvent(b.VerifyEmailOtp, s.id)(o);
    })), n;
  }
  recoverAccount(e) {
    let { email: t, showUI: s } = e, n = p(this.sdk.testMode ? g.RecoverAccountTestMode : g.RecoverAccount, [{ email: t, showUI: s }]), o = this.request(n);
    return !s && o && (o.on(j.Cancel, () => {
      this.createIntermediaryEvent(j.Cancel, n.id)();
    }), o.on(j.ResendSms, () => {
      this.createIntermediaryEvent(j.ResendSms, n.id)();
    }), o.on(j.VerifyOtp, (i) => {
      this.createIntermediaryEvent(j.VerifyOtp, n.id)(i);
    }), o.on(j.UpdateEmail, (i) => {
      this.createIntermediaryEvent(j.UpdateEmail, n.id)(i);
    }), o.on(F.Cancel, () => {
      this.createIntermediaryEvent(F.Cancel, n.id)();
    }), o.on(F.RetryWithNewEmail, (i) => {
      this.createIntermediaryEvent(F.RetryWithNewEmail, n.id)(i);
    }), o.on(F.VerifyEmailOtp, (i) => {
      this.createIntermediaryEvent(F.VerifyEmailOtp, n.id)(i);
    })), o;
  }
  revealPrivateKey() {
    let e = p(g.RevealPK);
    return this.request(e);
  }
  onUserLoggedOut(e) {
    this.userLoggedOutCallbacks.push(e);
  }
  enableMFA(e) {
    let { showUI: t = true } = e, s = p(g.EnableMFA, [{ showUI: t }]), n = this.request(s);
    return !t && n && (n.on(D.VerifyMFACode, (o) => {
      this.createIntermediaryEvent(D.VerifyMFACode, s.id)(o);
    }), n.on(D.Cancel, () => {
      this.createIntermediaryEvent(D.Cancel, s.id)();
    })), n;
  }
  disableMFA(e) {
    let { showUI: t = true } = e, s = p(g.DisableMFA, [{ showUI: t }]), n = this.request(s);
    return !t && n && (n.on(G.VerifyMFACode, (o) => {
      this.createIntermediaryEvent(G.VerifyMFACode, s.id)(o);
    }), n.on(G.LostDevice, (o) => {
      this.createIntermediaryEvent(G.LostDevice, s.id)(o);
    }), n.on(G.Cancel, () => {
      this.createIntermediaryEvent(G.Cancel, s.id)();
    })), n;
  }
  emitUserLoggedOut(e) {
    this.userLoggedOutCallbacks.forEach((t) => {
      t(e);
    });
  }
};
var be = class extends f2 {
  connectWithUI(e) {
    let t = b2(async (s, n) => {
      try {
        let o = p(g.Login, [{ enabledWallets: this.sdk.thirdPartyWallets.enabledWallets, ...e }]), i = this.request(o);
        this.sdk.thirdPartyWallets.eventListeners.forEach(({ event: c, callback: d }) => {
          i.on(c, () => d(o.id));
        }), i.on("id-token-created", (c) => {
          t.emit("id-token-created", c);
        });
        let a = await i;
        a.error && n(a), s(a);
      } catch (o) {
        n(o);
      }
    });
    return t;
  }
  showUI(e) {
    return this.request(p(g.ShowUI, [e]));
  }
  showAddress() {
    return this.request(p(g.ShowAddress));
  }
  showSendTokensUI() {
    return this.request(p(g.ShowSendTokensUI));
  }
  showOnRamp() {
    return this.request(p(g.ShowOnRamp));
  }
  showNFTs() {
    return this.request(p(g.ShowNFTs));
  }
  showBalances() {
    return this.request(p(g.ShowBalances));
  }
  sendGaslessTransaction(e, t) {
    return this.request(p(g.SendGaslessTransaction, [e, t]));
  }
};
var we = class extends f2 {
  constructor() {
    super(...arguments);
    __publicField(this, "eventListeners", []);
    __publicField(this, "enabledWallets", {});
    __publicField(this, "isConnected", false);
  }
  resetThirdPartyWalletState() {
    localStorage.removeItem(_.PROVIDER), localStorage.removeItem(_.ADDRESS), localStorage.removeItem(_.CHAIN_ID), this.isConnected = false;
  }
  requestOverride(e) {
    if (e.method === g.Login) return this.resetThirdPartyWalletState(), super.request(e);
    if (e.method === g.GetInfo) return this.getInfo(e);
    if (e.method === g.IsLoggedIn) return this.isLoggedIn(e);
    if (e.method === g.Logout) return this.logout(e);
    switch (localStorage.getItem(_.PROVIDER)) {
      case "web3modal":
        return this.web3modalRequest(e);
      default:
        return this.resetThirdPartyWalletState(), super.request(e);
    }
  }
  isLoggedIn(e) {
    switch (localStorage.getItem(_.PROVIDER)) {
      case "web3modal":
        return this.web3modalIsLoggedIn();
      default:
        return this.resetThirdPartyWalletState(), super.request(e);
    }
  }
  getInfo(e) {
    switch (localStorage.getItem(_.PROVIDER)) {
      case "web3modal":
        return this.web3modalGetInfo();
      default:
        return this.resetThirdPartyWalletState(), super.request(e);
    }
  }
  logout(e) {
    let t = localStorage.getItem(_.PROVIDER);
    switch (this.resetThirdPartyWalletState(), t) {
      case "web3modal":
        return this.web3modalLogout();
      default:
        return super.request(e);
    }
  }
  web3modalRequest(e) {
    return b2((t, s) => {
      this.sdk.web3modal.modal.getWalletProvider().request(e).then(t).catch(s);
    });
  }
  web3modalIsLoggedIn() {
    return b2((e) => {
      let t = this.sdk.web3modal.modal.getStatus();
      if (t === "connected" && e(true), t === "disconnected" && (this.resetThirdPartyWalletState(), e(false)), t === "reconnecting") {
        let s = this.sdk.web3modal.modal.subscribeProvider(({ status: n }) => {
          n === "connected" && (s(), e(true)), n === "disconnected" && (s(), this.resetThirdPartyWalletState(), e(false));
        });
      }
    });
  }
  formatWeb3modalGetInfoResponse() {
    var _a3;
    let e = (_a3 = this.sdk.web3modal.modal.getWalletInfo()) == null ? void 0 : _a3.name, t = this.sdk.web3modal.modal.getAddress();
    return { publicAddress: t, email: null, issuer: `did:ethr:${t}`, phoneNumber: null, isMfaEnabled: false, recoveryFactors: [], walletType: e || "web3modal", firstLoginAt: null };
  }
  web3modalGetInfo() {
    return b2((e, t) => {
      let s = this.sdk.web3modal.modal.getStatus();
      if (s === "connected" && e(this.formatWeb3modalGetInfoResponse()), s === "disconnected" && (this.resetThirdPartyWalletState(), t("Magic RPC Error: [-32603] Internal error: User denied account access.")), s === "reconnecting") {
        let n = this.sdk.web3modal.modal.subscribeProvider(({ status: o }) => {
          o === "connected" && (n(), e(this.formatWeb3modalGetInfoResponse())), o === "disconnected" && (n(), this.resetThirdPartyWalletState(), t("Magic RPC Error: [-32603] Internal error: User denied account access."));
        });
      }
    });
  }
  web3modalLogout() {
    return b2(async (e) => {
      try {
        await this.sdk.web3modal.modal.disconnect();
      } catch (t) {
        console.error(t);
      }
      e(true);
    });
  }
};
var { createBoundEmitterMethod: Se, createChainingEmitterMethod: H2 } = ge();
var xe = class extends f2 {
  constructor() {
    super(...arguments);
    __publicField(this, "isMagic", true);
    __publicField(this, "on", H2("on", this));
    __publicField(this, "once", H2("once", this));
    __publicField(this, "addListener", H2("addListener", this));
    __publicField(this, "off", H2("off", this));
    __publicField(this, "removeListener", H2("removeListener", this));
    __publicField(this, "removeAllListeners", H2("removeAllListeners", this));
    __publicField(this, "emit", Se("emit"));
    __publicField(this, "eventNames", Se("eventNames"));
    __publicField(this, "listeners", Se("listeners"));
    __publicField(this, "listenerCount", Se("listenerCount"));
  }
  sendAsync(e, t) {
    if (!t) throw ft({ procedure: "Magic.rpcProvider.sendAsync", argument: 1, expected: "function", received: t === null ? "null" : typeof t });
    if (Array.isArray(e)) this.overlay.post(x.MAGIC_HANDLE_REQUEST, e.map((s) => {
      let n = F2(s);
      return this.prefixPayloadMethodForTestMode(n), n;
    })).then((s) => {
      t(null, s.map((n) => ({ ...n.payload, error: n.hasError ? new U2(n.payload.error) : null })));
    });
    else {
      let s = F2(e);
      this.prefixPayloadMethodForTestMode(s), this.overlay.post(x.MAGIC_HANDLE_REQUEST, s).then((n) => {
        t(n.hasError ? new U2(n.payload.error) : null, n.payload);
      });
    }
  }
  send(e, t) {
    if (typeof e == "string") {
      let n = p(e, Array.isArray(t) ? t : []);
      return this.request(n);
    }
    if (Array.isArray(e) || t) {
      this.sendAsync(e, t);
      return;
    }
    let s = gt();
    return s.log(), new K(e).applyError({ code: -32603, message: s.rawMessage }).payload;
  }
  enable() {
    let e = p(g.Login);
    return this.request(e);
  }
  request(e) {
    return this.prefixPayloadMethodForTestMode(e), super.request(e);
  }
  prefixPayloadMethodForTestMode(e) {
    let t = "testMode/eth/";
    this.sdk.testMode && (e.method = `${t}${e.method}`);
  }
};
var Wt = ["request", "overlay", "sdk"];
function wn(r8) {
  let e = Object.getPrototypeOf(r8), t = [e];
  for (; e !== f2.prototype; ) e = Object.getPrototypeOf(e), t.push(e);
  return t;
}
var Ke = class extends f2 {
  constructor() {
    super(void 0);
    __publicField(this, "compat");
    __publicField(this, "__sdk_access_field_descriptors__", /* @__PURE__ */ new Map());
    __publicField(this, "__is_initialized__", false);
    __publicField(this, "utils", { createPromiEvent: b2, isPromiEvent: $t, encodeJSON: le, decodeJSON: at, createJsonRpcRequestPayload: p, standardizeJsonRpcRequestPayload: F2, storage: he });
    let e = [this, ...wn(this)];
    Wt.forEach((t) => {
      let s = e.map((a) => Object.getOwnPropertyDescriptor(a, t)), n = s.findIndex((a) => !!a), o = n > 0, i = s[n];
      i && (this.__sdk_access_field_descriptors__.set(t, { descriptor: i, isPrototypeField: o }), Object.defineProperty(this, t, { configurable: true, get: () => {
        throw ht(t);
      } }));
    });
  }
  init(e) {
    this.__is_initialized__ || (Wt.forEach((t) => {
      if (this.__sdk_access_field_descriptors__.has(t)) {
        let { descriptor: s, isPrototypeField: n } = this.__sdk_access_field_descriptors__.get(t);
        n ? delete this[t] : Object.defineProperty(this, t, s);
      }
    }), this.sdk = e, this.__is_initialized__ = true);
  }
  createDeprecationWarning(e) {
    let { method: t, removalVersion: s, useInstead: n } = e, o = n ? ` Use \`${n}\` instead.` : "", i = `\`${t}\` will be removed from this Extension in version \`${s}\`.${o}`;
    return new re(this, "DEPRECATION_NOTICE", i);
  }
  createWarning(e, t) {
    return new re(this, e, t);
  }
  createError(e, t, s) {
    return new ue(this, e, t, s);
  }
};
var je = class extends Ke {
};
var _a;
var X2 = (_a = class {
}, __publicField(_a, "Internal", je), _a);
var Ne = class extends f2 {
  purchase(e) {
    let t = p(g.NFTPurchase, [e]);
    return this.request(t);
  }
  checkout(e) {
    let t = this.sdk.thirdPartyWallets.isConnected, s = p(g.NFTCheckout, [{ ...e, walletProvider: t ? "web3modal" : "magic" }]), n = this.request(s);
    return t && (n.on(Q.Initiated, async (o) => {
      try {
        let i = await this.request({ method: "eth_sendTransaction", params: [o] });
        this.createIntermediaryEvent(Q.Success, s.id)(i);
      } catch {
        this.createIntermediaryEvent(Q.Failure, s.id)();
      }
    }), n.on(Q.Disconnect, () => {
      this.sdk.thirdPartyWallets.resetThirdPartyWalletState(), n.emit("disconnect");
    })), n;
  }
  transfer(e) {
    let t = p(g.NFTTransfer, [e]);
    return this.request(t);
  }
};
function Jt(r8) {
  return r8.compat && r8.compat[m2.sdkName] != null ? typeof r8.compat[m2.sdkName] == "string" ? ot(it(m2.version), r8.compat[m2.sdkName]) : !!r8.compat[m2.sdkName] : true;
}
function Sn(r8, e, t) {
  return !e && !t ? `${r8}_eth_mainnet` : t ? `${r8}_${JSON.stringify(t)}` : e ? typeof e == "string" ? `${r8}_eth_${e}` : `${r8}_${e.rpcUrl}_${e.chainId}_${e.chainType}` : `${r8}_unknown`;
}
function xn(r8) {
  let e = (r8 == null ? void 0 : r8.extensions) ?? [], t = {}, s = [];
  if (Array.isArray(e) ? e.forEach((n) => {
    Jt(n) ? (n.init(this), n.name && (this[n.name] = n), n instanceof X2.Internal && (te(n.config) || (t[n.name] = n.config))) : s.push(n);
  }) : Object.keys(e).forEach((n) => {
    if (Jt(e[n])) {
      e[n].init(this);
      let o = e[n];
      this[n] = o, o instanceof X2.Internal && (te(o.config) || (t[e[n].name] = o.config));
    } else s.push(e[n]);
  }), s.length) throw Et(s);
  return t;
}
var _a2;
var Be = (_a2 = class {
  constructor(e, t) {
    __publicField(this, "endpoint");
    __publicField(this, "parameters");
    __publicField(this, "networkHash");
    __publicField(this, "testMode");
    __publicField(this, "useStorageCache");
    __publicField(this, "auth");
    __publicField(this, "user");
    __publicField(this, "wallet");
    __publicField(this, "nft");
    __publicField(this, "thirdPartyWallets");
    __publicField(this, "rpcProvider");
    this.apiKey = e;
    if (!e) throw ut();
    m2.platform === "react-native" && (t == null ? void 0 : t.endpoint) && yt().log();
    let { defaultEndpoint: s, version: n } = m2;
    this.testMode = !!(t == null ? void 0 : t.testMode), this.useStorageCache = !!(t == null ? void 0 : t.useStorageCache), this.endpoint = Ge((t == null ? void 0 : t.endpoint) ?? s).origin, this.auth = new Re(this), this.user = new Ie(this), this.wallet = new be(this), this.nft = new Ne(this), this.thirdPartyWallets = new we(this), this.rpcProvider = new xe(this);
    let o = xn.call(this, t);
    this.parameters = le({ API_KEY: this.apiKey, DOMAIN_ORIGIN: window.location ? window.location.origin : "", ETH_NETWORK: t == null ? void 0 : t.network, host: Ge(this.endpoint).host, sdk: dt[m2.sdkName], version: n, ext: te(o) ? void 0 : o, locale: (t == null ? void 0 : t.locale) || "en_US", ...m2.bundleId ? { bundleId: m2.bundleId } : {}, meta: t == null ? void 0 : t.meta }), this.networkHash = Sn(this.apiKey, t == null ? void 0 : t.network, te(o) ? void 0 : o), (t == null ? void 0 : t.deferPreload) || this.preload();
  }
  get overlay() {
    if (!_a2.__overlays__.has(this.parameters)) {
      let e = new m2.ViewController(this.endpoint, this.parameters, this.networkHash);
      e.init(), _a2.__overlays__.set(this.parameters, e);
    }
    return _a2.__overlays__.get(this.parameters);
  }
  async preload() {
    await this.overlay.waitForReady();
  }
}, __publicField(_a2, "__overlays__", /* @__PURE__ */ new Map()), _a2);
function Mn(r8, e) {
  return e && Array.isArray(r8) ? r8.find((t) => t.id === e) : r8;
}
function Gt(r8, e) {
  var _a3;
  let t = (_a3 = e.data.response) == null ? void 0 : _a3.id, s = Mn(r8, t);
  if (t && s) {
    let n = new K(s).applyResult(e.data.response.result).applyError(e.data.response.error);
    return { id: t, response: n };
  }
  return {};
}
async function Kt(r8, e, t) {
  let s = await R2("rt"), n;
  if (m2.platform === "web") try {
    n = await R2("jwt") ?? await Pt();
  } catch (a) {
    console.error("webcrypto error", a);
  }
  let o = { msgType: r8, payload: e };
  n && (o.jwt = n), n && s && (o.rt = s);
  let i = await qt(t);
  return i && (o.deviceShare = i), o;
}
async function jt(r8) {
  r8.data.rt && await S2("rt", r8.data.rt);
}
function Vt(r8, e) {
  let t = null;
  return function(...s) {
    t && clearTimeout(t), t = setTimeout(() => {
      r8(...s);
    }, e);
  };
}
var An = 1e3;
var Ht = 60 * An;
var Bt = 5 * Ht;
var $n = 60 * Ht;
var He = class {
  constructor(e, t, s) {
    __publicField(this, "isReadyForRequest", false);
    __publicField(this, "messageHandlers", /* @__PURE__ */ new Set());
    __publicField(this, "isConnectedToInternet", true);
    __publicField(this, "lastPongTime", null);
    __publicField(this, "heartbeatIntervalTimer", null);
    __publicField(this, "heartbeatDebounce", Vt(() => {
      this.endpoint === "https://auth.magic.link/" && this.heartBeatCheck();
    }, $n));
    this.endpoint = e;
    this.parameters = t;
    this.networkHash = s;
    this.listen();
  }
  async post(e, t) {
    return qe(async (s, n) => {
      if (!this.isConnectedToInternet) {
        let l = pt();
        n(l);
      }
      await this.checkRelayerExistsInDOM() || (this.isReadyForRequest = false, await this.reloadRelayer()), this.isReadyForRequest || await this.waitForReady();
      let o = [], i = Array.isArray(t) ? t.map((l) => l.id) : [], a = await Kt(`${e}-${this.parameters}`, t, this.networkHash);
      await this._post(a);
      let c = (l) => (u2) => {
        var _a3;
        let { id: P2, response: w2 } = Gt(t, u2);
        if (jt(u2), ((_a3 = w2 == null ? void 0 : w2.payload.error) == null ? void 0 : _a3.message) === "User denied account access.") ve();
        else if (u2.data.deviceShare) {
          let { deviceShare: Xt } = u2.data;
          Dt(Xt, this.networkHash);
        }
        P2 && w2 && Array.isArray(t) && i.includes(P2) ? (o.push(w2), o.length === t.length && (l(), s(o))) : P2 && w2 && !Array.isArray(t) && P2 === t.id && (l(), s(w2));
      }, d = this.on(E.MAGIC_HANDLE_RESPONSE, c(() => d()));
    });
  }
  on(e, t) {
    let s = t.bind(window), n = (o) => {
      o.data.msgType === `${e}-${this.parameters}` && s(o);
    };
    return this.messageHandlers.add(n), () => this.messageHandlers.delete(n);
  }
  waitForReady() {
    return new Promise((e) => {
      let t = this.on(E.MAGIC_OVERLAY_READY, () => {
        this.isReadyForRequest = true, e(), t();
      });
    });
  }
  listen() {
    this.on(E.MAGIC_HIDE_OVERLAY, () => {
      this.hideOverlay();
    }), this.on(E.MAGIC_SHOW_OVERLAY, () => {
      this.showOverlay();
    }), this.on(E.MAGIC_SEND_PRODUCT_ANNOUNCEMENT, (e) => {
      e.data.response.result.product_announcement && new L2(v.ProductAnnouncement, e.data.response.result.product_announcement).log();
    });
  }
  heartBeatCheck() {
    let e = true, t = async () => {
      let s = { msgType: `${x.MAGIC_PING}-${this.parameters}`, payload: [] };
      await this._post(s);
    };
    this.heartbeatIntervalTimer = setInterval(async () => {
      if (this.lastPongTime) {
        if (Date.now() - this.lastPongTime > Bt * 2) {
          this.reloadRelayer(), e = true;
          return;
        }
      } else if (!e) {
        this.reloadRelayer(), e = true;
        return;
      }
      await t(), e = false;
    }, Bt);
  }
  stopHeartBeat() {
    this.heartbeatDebounce(), this.lastPongTime = null, this.heartbeatIntervalTimer && (clearInterval(this.heartbeatIntervalTimer), this.heartbeatIntervalTimer = null);
  }
};

// node_modules/magic-sdk/dist/es/index.mjs
var $r2 = Object.create;
var Qe2 = Object.defineProperty;
var Zr2 = Object.getOwnPropertyDescriptor;
var qr2 = Object.getOwnPropertyNames;
var kr2 = Object.getPrototypeOf;
var et2 = Object.prototype.hasOwnProperty;
var de2 = ((_2) => typeof __require < "u" ? __require : typeof Proxy < "u" ? new Proxy(_2, { get: (y3, O3) => (typeof __require < "u" ? __require : y3)[O3] }) : _2)(function(_2) {
  if (typeof __require < "u") return __require.apply(this, arguments);
  throw Error('Dynamic require of "' + _2 + '" is not supported');
});
var Je2 = (_2, y3) => () => (y3 || _2((y3 = { exports: {} }).exports, y3), y3.exports);
var rt2 = (_2, y3, O3, C3) => {
  if (y3 && typeof y3 == "object" || typeof y3 == "function") for (let W2 of qr2(y3)) !et2.call(_2, W2) && W2 !== O3 && Qe2(_2, W2, { get: () => y3[W2], enumerable: !(C3 = Zr2(y3, W2)) || C3.enumerable });
  return _2;
};
var $e2 = (_2, y3, O3) => (O3 = _2 != null ? $r2(kr2(_2)) : {}, rt2(y3 || !_2 || !_2.__esModule ? Qe2(O3, "default", { value: _2, enumerable: true }) : O3, _2));
var qe2 = Je2((Ze2, De2) => {
  "use strict";
  (function(_2) {
    if (typeof Ze2 == "object" && typeof De2 < "u") De2.exports = _2();
    else if (typeof define == "function" && define.amd) define([], _2);
    else {
      var y3;
      typeof window < "u" ? y3 = window : typeof global < "u" ? y3 = global : typeof self < "u" ? y3 = self : y3 = this, y3.localforage = _2();
    }
  })(function() {
    var _2, y3, O3;
    return function C3(W2, Z3, L3) {
      function V2(K2, J3) {
        if (!Z3[K2]) {
          if (!W2[K2]) {
            var m3 = typeof de2 == "function" && de2;
            if (!J3 && m3) return m3(K2, true);
            if (D2) return D2(K2, true);
            var w2 = new Error("Cannot find module '" + K2 + "'");
            throw w2.code = "MODULE_NOT_FOUND", w2;
          }
          var T3 = Z3[K2] = { exports: {} };
          W2[K2][0].call(T3.exports, function(F3) {
            var $2 = W2[K2][1][F3];
            return V2($2 || F3);
          }, T3, T3.exports, C3, W2, Z3, L3);
        }
        return Z3[K2].exports;
      }
      for (var D2 = typeof de2 == "function" && de2, z3 = 0; z3 < L3.length; z3++) V2(L3[z3]);
      return V2;
    }({ 1: [function(C3, W2, Z3) {
      (function(L3) {
        "use strict";
        var V2 = L3.MutationObserver || L3.WebKitMutationObserver, D2;
        if (V2) {
          var z3 = 0, K2 = new V2(F3), J3 = L3.document.createTextNode("");
          K2.observe(J3, { characterData: true }), D2 = function() {
            J3.data = z3 = ++z3 % 2;
          };
        } else if (!L3.setImmediate && typeof L3.MessageChannel < "u") {
          var m3 = new L3.MessageChannel();
          m3.port1.onmessage = F3, D2 = function() {
            m3.port2.postMessage(0);
          };
        } else "document" in L3 && "onreadystatechange" in L3.document.createElement("script") ? D2 = function() {
          var P2 = L3.document.createElement("script");
          P2.onreadystatechange = function() {
            F3(), P2.onreadystatechange = null, P2.parentNode.removeChild(P2), P2 = null;
          }, L3.document.documentElement.appendChild(P2);
        } : D2 = function() {
          setTimeout(F3, 0);
        };
        var w2, T3 = [];
        function F3() {
          w2 = true;
          for (var P2, k2, M2 = T3.length; M2; ) {
            for (k2 = T3, T3 = [], P2 = -1; ++P2 < M2; ) k2[P2]();
            M2 = T3.length;
          }
          w2 = false;
        }
        W2.exports = $2;
        function $2(P2) {
          T3.push(P2) === 1 && !w2 && D2();
        }
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, {}], 2: [function(C3, W2, Z3) {
      "use strict";
      var L3 = C3(1);
      function V2() {
      }
      var D2 = {}, z3 = ["REJECTED"], K2 = ["FULFILLED"], J3 = ["PENDING"];
      W2.exports = m3;
      function m3(h3) {
        if (typeof h3 != "function") throw new TypeError("resolver must be a function");
        this.state = J3, this.queue = [], this.outcome = void 0, h3 !== V2 && $2(this, h3);
      }
      m3.prototype.catch = function(h3) {
        return this.then(null, h3);
      }, m3.prototype.then = function(h3, A3) {
        if (typeof h3 != "function" && this.state === K2 || typeof A3 != "function" && this.state === z3) return this;
        var E3 = new this.constructor(V2);
        if (this.state !== J3) {
          var N2 = this.state === K2 ? h3 : A3;
          T3(E3, N2, this.outcome);
        } else this.queue.push(new w2(E3, h3, A3));
        return E3;
      };
      function w2(h3, A3, E3) {
        this.promise = h3, typeof A3 == "function" && (this.onFulfilled = A3, this.callFulfilled = this.otherCallFulfilled), typeof E3 == "function" && (this.onRejected = E3, this.callRejected = this.otherCallRejected);
      }
      w2.prototype.callFulfilled = function(h3) {
        D2.resolve(this.promise, h3);
      }, w2.prototype.otherCallFulfilled = function(h3) {
        T3(this.promise, this.onFulfilled, h3);
      }, w2.prototype.callRejected = function(h3) {
        D2.reject(this.promise, h3);
      }, w2.prototype.otherCallRejected = function(h3) {
        T3(this.promise, this.onRejected, h3);
      };
      function T3(h3, A3, E3) {
        L3(function() {
          var N2;
          try {
            N2 = A3(E3);
          } catch (H3) {
            return D2.reject(h3, H3);
          }
          N2 === h3 ? D2.reject(h3, new TypeError("Cannot resolve promise with itself")) : D2.resolve(h3, N2);
        });
      }
      D2.resolve = function(h3, A3) {
        var E3 = P2(F3, A3);
        if (E3.status === "error") return D2.reject(h3, E3.value);
        var N2 = E3.value;
        if (N2) $2(h3, N2);
        else {
          h3.state = K2, h3.outcome = A3;
          for (var H3 = -1, j2 = h3.queue.length; ++H3 < j2; ) h3.queue[H3].callFulfilled(A3);
        }
        return h3;
      }, D2.reject = function(h3, A3) {
        h3.state = z3, h3.outcome = A3;
        for (var E3 = -1, N2 = h3.queue.length; ++E3 < N2; ) h3.queue[E3].callRejected(A3);
        return h3;
      };
      function F3(h3) {
        var A3 = h3 && h3.then;
        if (h3 && (typeof h3 == "object" || typeof h3 == "function") && typeof A3 == "function") return function() {
          A3.apply(h3, arguments);
        };
      }
      function $2(h3, A3) {
        var E3 = false;
        function N2(Q3) {
          E3 || (E3 = true, D2.reject(h3, Q3));
        }
        function H3(Q3) {
          E3 || (E3 = true, D2.resolve(h3, Q3));
        }
        function j2() {
          A3(H3, N2);
        }
        var X3 = P2(j2);
        X3.status === "error" && N2(X3.value);
      }
      function P2(h3, A3) {
        var E3 = {};
        try {
          E3.value = h3(A3), E3.status = "success";
        } catch (N2) {
          E3.status = "error", E3.value = N2;
        }
        return E3;
      }
      m3.resolve = k2;
      function k2(h3) {
        return h3 instanceof this ? h3 : D2.resolve(new this(V2), h3);
      }
      m3.reject = M2;
      function M2(h3) {
        var A3 = new this(V2);
        return D2.reject(A3, h3);
      }
      m3.all = ae2;
      function ae2(h3) {
        var A3 = this;
        if (Object.prototype.toString.call(h3) !== "[object Array]") return this.reject(new TypeError("must be an array"));
        var E3 = h3.length, N2 = false;
        if (!E3) return this.resolve([]);
        for (var H3 = new Array(E3), j2 = 0, X3 = -1, Q3 = new this(V2); ++X3 < E3; ) ee2(h3[X3], X3);
        return Q3;
        function ee2(oe, a) {
          A3.resolve(oe).then(u2, function(v2) {
            N2 || (N2 = true, D2.reject(Q3, v2));
          });
          function u2(v2) {
            H3[a] = v2, ++j2 === E3 && !N2 && (N2 = true, D2.resolve(Q3, H3));
          }
        }
      }
      m3.race = re2;
      function re2(h3) {
        var A3 = this;
        if (Object.prototype.toString.call(h3) !== "[object Array]") return this.reject(new TypeError("must be an array"));
        var E3 = h3.length, N2 = false;
        if (!E3) return this.resolve([]);
        for (var H3 = -1, j2 = new this(V2); ++H3 < E3; ) X3(h3[H3]);
        return j2;
        function X3(Q3) {
          A3.resolve(Q3).then(function(ee2) {
            N2 || (N2 = true, D2.resolve(j2, ee2));
          }, function(ee2) {
            N2 || (N2 = true, D2.reject(j2, ee2));
          });
        }
      }
    }, { 1: 1 }], 3: [function(C3, W2, Z3) {
      (function(L3) {
        "use strict";
        typeof L3.Promise != "function" && (L3.Promise = C3(2));
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, { 2: 2 }], 4: [function(C3, W2, Z3) {
      "use strict";
      var L3 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
        return typeof e;
      } : function(e) {
        return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      };
      function V2(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }
      function D2() {
        try {
          if (typeof indexedDB < "u") return indexedDB;
          if (typeof webkitIndexedDB < "u") return webkitIndexedDB;
          if (typeof mozIndexedDB < "u") return mozIndexedDB;
          if (typeof OIndexedDB < "u") return OIndexedDB;
          if (typeof msIndexedDB < "u") return msIndexedDB;
        } catch {
          return;
        }
      }
      var z3 = D2();
      function K2() {
        try {
          if (!z3 || !z3.open) return false;
          var e = typeof openDatabase < "u" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = typeof fetch == "function" && fetch.toString().indexOf("[native code") !== -1;
          return (!e || t) && typeof indexedDB < "u" && typeof IDBKeyRange < "u";
        } catch {
          return false;
        }
      }
      function J3(e, t) {
        e = e || [], t = t || {};
        try {
          return new Blob(e, t);
        } catch (n) {
          if (n.name !== "TypeError") throw n;
          for (var r8 = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, o = new r8(), i = 0; i < e.length; i += 1) o.append(e[i]);
          return o.getBlob(t.type);
        }
      }
      typeof Promise > "u" && C3(3);
      var m3 = Promise;
      function w2(e, t) {
        t && e.then(function(r8) {
          t(null, r8);
        }, function(r8) {
          t(r8);
        });
      }
      function T3(e, t, r8) {
        typeof t == "function" && e.then(t), typeof r8 == "function" && e.catch(r8);
      }
      function F3(e) {
        return typeof e != "string" && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e;
      }
      function $2() {
        if (arguments.length && typeof arguments[arguments.length - 1] == "function") return arguments[arguments.length - 1];
      }
      var P2 = "local-forage-detect-blob-support", k2 = void 0, M2 = {}, ae2 = Object.prototype.toString, re2 = "readonly", h3 = "readwrite";
      function A3(e) {
        for (var t = e.length, r8 = new ArrayBuffer(t), o = new Uint8Array(r8), i = 0; i < t; i++) o[i] = e.charCodeAt(i);
        return r8;
      }
      function E3(e) {
        return new m3(function(t) {
          var r8 = e.transaction(P2, h3), o = J3([""]);
          r8.objectStore(P2).put(o, "key"), r8.onabort = function(i) {
            i.preventDefault(), i.stopPropagation(), t(false);
          }, r8.oncomplete = function() {
            var i = navigator.userAgent.match(/Chrome\/(\d+)/), n = navigator.userAgent.match(/Edge\//);
            t(n || !i || parseInt(i[1], 10) >= 43);
          };
        }).catch(function() {
          return false;
        });
      }
      function N2(e) {
        return typeof k2 == "boolean" ? m3.resolve(k2) : E3(e).then(function(t) {
          return k2 = t, k2;
        });
      }
      function H3(e) {
        var t = M2[e.name], r8 = {};
        r8.promise = new m3(function(o, i) {
          r8.resolve = o, r8.reject = i;
        }), t.deferredOperations.push(r8), t.dbReady ? t.dbReady = t.dbReady.then(function() {
          return r8.promise;
        }) : t.dbReady = r8.promise;
      }
      function j2(e) {
        var t = M2[e.name], r8 = t.deferredOperations.pop();
        if (r8) return r8.resolve(), r8.promise;
      }
      function X3(e, t) {
        var r8 = M2[e.name], o = r8.deferredOperations.pop();
        if (o) return o.reject(t), o.promise;
      }
      function Q3(e, t) {
        return new m3(function(r8, o) {
          if (M2[e.name] = M2[e.name] || G2(), e.db) if (t) H3(e), e.db.close();
          else return r8(e.db);
          var i = [e.name];
          t && i.push(e.version);
          var n = z3.open.apply(z3, i);
          t && (n.onupgradeneeded = function(f3) {
            var s = n.result;
            try {
              s.createObjectStore(e.storeName), f3.oldVersion <= 1 && s.createObjectStore(P2);
            } catch (c) {
              if (c.name === "ConstraintError") console.warn('The database "' + e.name + '" has been upgraded from version ' + f3.oldVersion + " to version " + f3.newVersion + ', but the storage "' + e.storeName + '" already exists.');
              else throw c;
            }
          }), n.onerror = function(f3) {
            f3.preventDefault(), o(n.error);
          }, n.onsuccess = function() {
            var f3 = n.result;
            f3.onversionchange = function(s) {
              s.target.close();
            }, r8(f3), j2(e);
          };
        });
      }
      function ee2(e) {
        return Q3(e, false);
      }
      function oe(e) {
        return Q3(e, true);
      }
      function a(e, t) {
        if (!e.db) return true;
        var r8 = !e.db.objectStoreNames.contains(e.storeName), o = e.version < e.db.version, i = e.version > e.db.version;
        if (o && (e.version !== t && console.warn('The database "' + e.name + `" can't be downgraded from version ` + e.db.version + " to version " + e.version + "."), e.version = e.db.version), i || r8) {
          if (r8) {
            var n = e.db.version + 1;
            n > e.version && (e.version = n);
          }
          return true;
        }
        return false;
      }
      function u2(e) {
        return new m3(function(t, r8) {
          var o = new FileReader();
          o.onerror = r8, o.onloadend = function(i) {
            var n = btoa(i.target.result || "");
            t({ __local_forage_encoded_blob: true, data: n, type: e.type });
          }, o.readAsBinaryString(e);
        });
      }
      function v2(e) {
        var t = A3(atob(e.data));
        return J3([t], { type: e.type });
      }
      function g2(e) {
        return e && e.__local_forage_encoded_blob;
      }
      function b3(e) {
        var t = this, r8 = t._initReady().then(function() {
          var o = M2[t._dbInfo.name];
          if (o && o.dbReady) return o.dbReady;
        });
        return T3(r8, e, e), r8;
      }
      function I2(e) {
        H3(e);
        for (var t = M2[e.name], r8 = t.forages, o = 0; o < r8.length; o++) {
          var i = r8[o];
          i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null);
        }
        return e.db = null, ee2(e).then(function(n) {
          return e.db = n, a(e) ? oe(e) : n;
        }).then(function(n) {
          e.db = t.db = n;
          for (var f3 = 0; f3 < r8.length; f3++) r8[f3]._dbInfo.db = n;
        }).catch(function(n) {
          throw X3(e, n), n;
        });
      }
      function R3(e, t, r8, o) {
        o === void 0 && (o = 1);
        try {
          var i = e.db.transaction(e.storeName, t);
          r8(null, i);
        } catch (n) {
          if (o > 0 && (!e.db || n.name === "InvalidStateError" || n.name === "NotFoundError")) return m3.resolve().then(function() {
            if (!e.db || n.name === "NotFoundError" && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version) return e.db && (e.version = e.db.version + 1), oe(e);
          }).then(function() {
            return I2(e).then(function() {
              R3(e, t, r8, o - 1);
            });
          }).catch(r8);
          r8(n);
        }
      }
      function G2() {
        return { forages: [], db: null, dbReady: null, deferredOperations: [] };
      }
      function fe(e) {
        var t = this, r8 = { db: null };
        if (e) for (var o in e) r8[o] = e[o];
        var i = M2[r8.name];
        i || (i = G2(), M2[r8.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = b3);
        var n = [];
        function f3() {
          return m3.resolve();
        }
        for (var s = 0; s < i.forages.length; s++) {
          var c = i.forages[s];
          c !== t && n.push(c._initReady().catch(f3));
        }
        var l = i.forages.slice(0);
        return m3.all(n).then(function() {
          return r8.db = i.db, ee2(r8);
        }).then(function(d) {
          return r8.db = d, a(r8, t._defaultConfig.version) ? oe(r8) : d;
        }).then(function(d) {
          r8.db = i.db = d, t._dbInfo = r8;
          for (var p2 = 0; p2 < l.length; p2++) {
            var S3 = l[p2];
            S3 !== t && (S3._dbInfo.db = r8.db, S3._dbInfo.version = r8.version);
          }
        });
      }
      function ie2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = new m3(function(i, n) {
          r8.ready().then(function() {
            R3(r8._dbInfo, re2, function(f3, s) {
              if (f3) return n(f3);
              try {
                var c = s.objectStore(r8._dbInfo.storeName), l = c.get(e);
                l.onsuccess = function() {
                  var d = l.result;
                  d === void 0 && (d = null), g2(d) && (d = v2(d)), i(d);
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (d) {
                n(d);
              }
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function ue2(e, t) {
        var r8 = this, o = new m3(function(i, n) {
          r8.ready().then(function() {
            R3(r8._dbInfo, re2, function(f3, s) {
              if (f3) return n(f3);
              try {
                var c = s.objectStore(r8._dbInfo.storeName), l = c.openCursor(), d = 1;
                l.onsuccess = function() {
                  var p2 = l.result;
                  if (p2) {
                    var S3 = p2.value;
                    g2(S3) && (S3 = v2(S3));
                    var B2 = e(S3, p2.key, d++);
                    B2 !== void 0 ? i(B2) : p2.continue();
                  } else i();
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (p2) {
                n(p2);
              }
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function tr2(e, t, r8) {
        var o = this;
        e = F3(e);
        var i = new m3(function(n, f3) {
          var s;
          o.ready().then(function() {
            return s = o._dbInfo, ae2.call(t) === "[object Blob]" ? N2(s.db).then(function(c) {
              return c ? t : u2(t);
            }) : t;
          }).then(function(c) {
            R3(o._dbInfo, h3, function(l, d) {
              if (l) return f3(l);
              try {
                var p2 = d.objectStore(o._dbInfo.storeName);
                c === null && (c = void 0);
                var S3 = p2.put(c, e);
                d.oncomplete = function() {
                  c === void 0 && (c = null), n(c);
                }, d.onabort = d.onerror = function() {
                  var B2 = S3.error ? S3.error : S3.transaction.error;
                  f3(B2);
                };
              } catch (B2) {
                f3(B2);
              }
            });
          }).catch(f3);
        });
        return w2(i, r8), i;
      }
      function nr2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = new m3(function(i, n) {
          r8.ready().then(function() {
            R3(r8._dbInfo, h3, function(f3, s) {
              if (f3) return n(f3);
              try {
                var c = s.objectStore(r8._dbInfo.storeName), l = c.delete(e);
                s.oncomplete = function() {
                  i();
                }, s.onerror = function() {
                  n(l.error);
                }, s.onabort = function() {
                  var d = l.error ? l.error : l.transaction.error;
                  n(d);
                };
              } catch (d) {
                n(d);
              }
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function or2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            R3(t._dbInfo, h3, function(n, f3) {
              if (n) return i(n);
              try {
                var s = f3.objectStore(t._dbInfo.storeName), c = s.clear();
                f3.oncomplete = function() {
                  o();
                }, f3.onabort = f3.onerror = function() {
                  var l = c.error ? c.error : c.transaction.error;
                  i(l);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function ir2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            R3(t._dbInfo, re2, function(n, f3) {
              if (n) return i(n);
              try {
                var s = f3.objectStore(t._dbInfo.storeName), c = s.count();
                c.onsuccess = function() {
                  o(c.result);
                }, c.onerror = function() {
                  i(c.error);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function ar2(e, t) {
        var r8 = this, o = new m3(function(i, n) {
          if (e < 0) {
            i(null);
            return;
          }
          r8.ready().then(function() {
            R3(r8._dbInfo, re2, function(f3, s) {
              if (f3) return n(f3);
              try {
                var c = s.objectStore(r8._dbInfo.storeName), l = false, d = c.openKeyCursor();
                d.onsuccess = function() {
                  var p2 = d.result;
                  if (!p2) {
                    i(null);
                    return;
                  }
                  e === 0 || l ? i(p2.key) : (l = true, p2.advance(e));
                }, d.onerror = function() {
                  n(d.error);
                };
              } catch (p2) {
                n(p2);
              }
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function fr2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            R3(t._dbInfo, re2, function(n, f3) {
              if (n) return i(n);
              try {
                var s = f3.objectStore(t._dbInfo.storeName), c = s.openKeyCursor(), l = [];
                c.onsuccess = function() {
                  var d = c.result;
                  if (!d) {
                    o(l);
                    return;
                  }
                  l.push(d.key), d.continue();
                }, c.onerror = function() {
                  i(c.error);
                };
              } catch (d) {
                i(d);
              }
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function sr2(e, t) {
        t = $2.apply(this, arguments);
        var r8 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r8.name, e.storeName = e.storeName || r8.storeName);
        var o = this, i;
        if (!e.name) i = m3.reject("Invalid arguments");
        else {
          var n = e.name === r8.name && o._dbInfo.db, f3 = n ? m3.resolve(o._dbInfo.db) : ee2(e).then(function(s) {
            var c = M2[e.name], l = c.forages;
            c.db = s;
            for (var d = 0; d < l.length; d++) l[d]._dbInfo.db = s;
            return s;
          });
          e.storeName ? i = f3.then(function(s) {
            if (s.objectStoreNames.contains(e.storeName)) {
              var c = s.version + 1;
              H3(e);
              var l = M2[e.name], d = l.forages;
              s.close();
              for (var p2 = 0; p2 < d.length; p2++) {
                var S3 = d[p2];
                S3._dbInfo.db = null, S3._dbInfo.version = c;
              }
              var B2 = new m3(function(x2, Y3) {
                var U3 = z3.open(e.name, c);
                U3.onerror = function(q2) {
                  var le2 = U3.result;
                  le2.close(), Y3(q2);
                }, U3.onupgradeneeded = function() {
                  var q2 = U3.result;
                  q2.deleteObjectStore(e.storeName);
                }, U3.onsuccess = function() {
                  var q2 = U3.result;
                  q2.close(), x2(q2);
                };
              });
              return B2.then(function(x2) {
                l.db = x2;
                for (var Y3 = 0; Y3 < d.length; Y3++) {
                  var U3 = d[Y3];
                  U3._dbInfo.db = x2, j2(U3._dbInfo);
                }
              }).catch(function(x2) {
                throw (X3(e, x2) || m3.resolve()).catch(function() {
                }), x2;
              });
            }
          }) : i = f3.then(function(s) {
            H3(e);
            var c = M2[e.name], l = c.forages;
            s.close();
            for (var d = 0; d < l.length; d++) {
              var p2 = l[d];
              p2._dbInfo.db = null;
            }
            var S3 = new m3(function(B2, x2) {
              var Y3 = z3.deleteDatabase(e.name);
              Y3.onerror = function() {
                var U3 = Y3.result;
                U3 && U3.close(), x2(Y3.error);
              }, Y3.onblocked = function() {
                console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed');
              }, Y3.onsuccess = function() {
                var U3 = Y3.result;
                U3 && U3.close(), B2(U3);
              };
            });
            return S3.then(function(B2) {
              c.db = B2;
              for (var x2 = 0; x2 < l.length; x2++) {
                var Y3 = l[x2];
                j2(Y3._dbInfo);
              }
            }).catch(function(B2) {
              throw (X3(e, B2) || m3.resolve()).catch(function() {
              }), B2;
            });
          });
        }
        return w2(i, t), i;
      }
      var ur2 = { _driver: "asyncStorage", _initStorage: fe, _support: K2(), iterate: ue2, getItem: ie2, setItem: tr2, removeItem: nr2, clear: or2, length: ir2, key: ar2, keys: fr2, dropInstance: sr2 };
      function cr2() {
        return typeof openDatabase == "function";
      }
      var te2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", lr2 = "~~local_forage_type~", Be2 = /^~~local_forage_type~([^~]+)~/, ve2 = "__lfsc__:", ge2 = ve2.length, be2 = "arbf", _e2 = "blob", Ne2 = "si08", xe2 = "ui08", Oe2 = "uic8", Ce2 = "si16", Le2 = "si32", Pe = "ur16", Me = "ui32", Fe2 = "fl32", Ue2 = "fl64", We2 = ge2 + be2.length, ze2 = Object.prototype.toString;
      function Ye2(e) {
        var t = e.length * 0.75, r8 = e.length, o, i = 0, n, f3, s, c;
        e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
        var l = new ArrayBuffer(t), d = new Uint8Array(l);
        for (o = 0; o < r8; o += 4) n = te2.indexOf(e[o]), f3 = te2.indexOf(e[o + 1]), s = te2.indexOf(e[o + 2]), c = te2.indexOf(e[o + 3]), d[i++] = n << 2 | f3 >> 4, d[i++] = (f3 & 15) << 4 | s >> 2, d[i++] = (s & 3) << 6 | c & 63;
        return l;
      }
      function we2(e) {
        var t = new Uint8Array(e), r8 = "", o;
        for (o = 0; o < t.length; o += 3) r8 += te2[t[o] >> 2], r8 += te2[(t[o] & 3) << 4 | t[o + 1] >> 4], r8 += te2[(t[o + 1] & 15) << 2 | t[o + 2] >> 6], r8 += te2[t[o + 2] & 63];
        return t.length % 3 === 2 ? r8 = r8.substring(0, r8.length - 1) + "=" : t.length % 3 === 1 && (r8 = r8.substring(0, r8.length - 2) + "=="), r8;
      }
      function dr2(e, t) {
        var r8 = "";
        if (e && (r8 = ze2.call(e)), e && (r8 === "[object ArrayBuffer]" || e.buffer && ze2.call(e.buffer) === "[object ArrayBuffer]")) {
          var o, i = ve2;
          e instanceof ArrayBuffer ? (o = e, i += be2) : (o = e.buffer, r8 === "[object Int8Array]" ? i += Ne2 : r8 === "[object Uint8Array]" ? i += xe2 : r8 === "[object Uint8ClampedArray]" ? i += Oe2 : r8 === "[object Int16Array]" ? i += Ce2 : r8 === "[object Uint16Array]" ? i += Pe : r8 === "[object Int32Array]" ? i += Le2 : r8 === "[object Uint32Array]" ? i += Me : r8 === "[object Float32Array]" ? i += Fe2 : r8 === "[object Float64Array]" ? i += Ue2 : t(new Error("Failed to get type for BinaryArray"))), t(i + we2(o));
        } else if (r8 === "[object Blob]") {
          var n = new FileReader();
          n.onload = function() {
            var f3 = lr2 + e.type + "~" + we2(this.result);
            t(ve2 + _e2 + f3);
          }, n.readAsArrayBuffer(e);
        } else try {
          t(JSON.stringify(e));
        } catch (f3) {
          console.error("Couldn't convert value into a JSON string: ", e), t(null, f3);
        }
      }
      function vr2(e) {
        if (e.substring(0, ge2) !== ve2) return JSON.parse(e);
        var t = e.substring(We2), r8 = e.substring(ge2, We2), o;
        if (r8 === _e2 && Be2.test(t)) {
          var i = t.match(Be2);
          o = i[1], t = t.substring(i[0].length);
        }
        var n = Ye2(t);
        switch (r8) {
          case be2:
            return n;
          case _e2:
            return J3([n], { type: o });
          case Ne2:
            return new Int8Array(n);
          case xe2:
            return new Uint8Array(n);
          case Oe2:
            return new Uint8ClampedArray(n);
          case Ce2:
            return new Int16Array(n);
          case Pe:
            return new Uint16Array(n);
          case Le2:
            return new Int32Array(n);
          case Me:
            return new Uint32Array(n);
          case Fe2:
            return new Float32Array(n);
          case Ue2:
            return new Float64Array(n);
          default:
            throw new Error("Unkown type: " + r8);
        }
      }
      var Ie2 = { serialize: dr2, deserialize: vr2, stringToBuffer: Ye2, bufferToString: we2 };
      function Ke2(e, t, r8, o) {
        e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], r8, o);
      }
      function hr2(e) {
        var t = this, r8 = { db: null };
        if (e) for (var o in e) r8[o] = typeof e[o] != "string" ? e[o].toString() : e[o];
        var i = new m3(function(n, f3) {
          try {
            r8.db = openDatabase(r8.name, String(r8.version), r8.description, r8.size);
          } catch (s) {
            return f3(s);
          }
          r8.db.transaction(function(s) {
            Ke2(s, r8, function() {
              t._dbInfo = r8, n();
            }, function(c, l) {
              f3(l);
            });
          }, f3);
        });
        return r8.serializer = Ie2, i;
      }
      function ne2(e, t, r8, o, i, n) {
        e.executeSql(r8, o, i, function(f3, s) {
          s.code === s.SYNTAX_ERR ? f3.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function(c, l) {
            l.rows.length ? n(c, s) : Ke2(c, t, function() {
              c.executeSql(r8, o, i, n);
            }, n);
          }, n) : n(f3, s);
        }, n);
      }
      function mr2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = new m3(function(i, n) {
          r8.ready().then(function() {
            var f3 = r8._dbInfo;
            f3.db.transaction(function(s) {
              ne2(s, f3, "SELECT * FROM " + f3.storeName + " WHERE key = ? LIMIT 1", [e], function(c, l) {
                var d = l.rows.length ? l.rows.item(0).value : null;
                d && (d = f3.serializer.deserialize(d)), i(d);
              }, function(c, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function yr2(e, t) {
        var r8 = this, o = new m3(function(i, n) {
          r8.ready().then(function() {
            var f3 = r8._dbInfo;
            f3.db.transaction(function(s) {
              ne2(s, f3, "SELECT * FROM " + f3.storeName, [], function(c, l) {
                for (var d = l.rows, p2 = d.length, S3 = 0; S3 < p2; S3++) {
                  var B2 = d.item(S3), x2 = B2.value;
                  if (x2 && (x2 = f3.serializer.deserialize(x2)), x2 = e(x2, B2.key, S3 + 1), x2 !== void 0) {
                    i(x2);
                    return;
                  }
                }
                i();
              }, function(c, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function He2(e, t, r8, o) {
        var i = this;
        e = F3(e);
        var n = new m3(function(f3, s) {
          i.ready().then(function() {
            t === void 0 && (t = null);
            var c = t, l = i._dbInfo;
            l.serializer.serialize(t, function(d, p2) {
              p2 ? s(p2) : l.db.transaction(function(S3) {
                ne2(S3, l, "INSERT OR REPLACE INTO " + l.storeName + " (key, value) VALUES (?, ?)", [e, d], function() {
                  f3(c);
                }, function(B2, x2) {
                  s(x2);
                });
              }, function(S3) {
                if (S3.code === S3.QUOTA_ERR) {
                  if (o > 0) {
                    f3(He2.apply(i, [e, c, r8, o - 1]));
                    return;
                  }
                  s(S3);
                }
              });
            });
          }).catch(s);
        });
        return w2(n, r8), n;
      }
      function pr2(e, t, r8) {
        return He2.apply(this, [e, t, r8, 1]);
      }
      function gr2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = new m3(function(i, n) {
          r8.ready().then(function() {
            var f3 = r8._dbInfo;
            f3.db.transaction(function(s) {
              ne2(s, f3, "DELETE FROM " + f3.storeName + " WHERE key = ?", [e], function() {
                i();
              }, function(c, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function br2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f3) {
              ne2(f3, n, "DELETE FROM " + n.storeName, [], function() {
                o();
              }, function(s, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function _r2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f3) {
              ne2(f3, n, "SELECT COUNT(key) as c FROM " + n.storeName, [], function(s, c) {
                var l = c.rows.item(0).c;
                o(l);
              }, function(s, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function wr2(e, t) {
        var r8 = this, o = new m3(function(i, n) {
          r8.ready().then(function() {
            var f3 = r8._dbInfo;
            f3.db.transaction(function(s) {
              ne2(s, f3, "SELECT key FROM " + f3.storeName + " WHERE id = ? LIMIT 1", [e + 1], function(c, l) {
                var d = l.rows.length ? l.rows.item(0).key : null;
                i(d);
              }, function(c, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return w2(o, t), o;
      }
      function Ir2(e) {
        var t = this, r8 = new m3(function(o, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f3) {
              ne2(f3, n, "SELECT key FROM " + n.storeName, [], function(s, c) {
                for (var l = [], d = 0; d < c.rows.length; d++) l.push(c.rows.item(d).key);
                o(l);
              }, function(s, c) {
                i(c);
              });
            });
          }).catch(i);
        });
        return w2(r8, e), r8;
      }
      function Er2(e) {
        return new m3(function(t, r8) {
          e.transaction(function(o) {
            o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(i, n) {
              for (var f3 = [], s = 0; s < n.rows.length; s++) f3.push(n.rows.item(s).name);
              t({ db: e, storeNames: f3 });
            }, function(i, n) {
              r8(n);
            });
          }, function(o) {
            r8(o);
          });
        });
      }
      function Sr2(e, t) {
        t = $2.apply(this, arguments);
        var r8 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r8.name, e.storeName = e.storeName || r8.storeName);
        var o = this, i;
        return e.name ? i = new m3(function(n) {
          var f3;
          e.name === r8.name ? f3 = o._dbInfo.db : f3 = openDatabase(e.name, "", "", 0), e.storeName ? n({ db: f3, storeNames: [e.storeName] }) : n(Er2(f3));
        }).then(function(n) {
          return new m3(function(f3, s) {
            n.db.transaction(function(c) {
              function l(B2) {
                return new m3(function(x2, Y3) {
                  c.executeSql("DROP TABLE IF EXISTS " + B2, [], function() {
                    x2();
                  }, function(U3, q2) {
                    Y3(q2);
                  });
                });
              }
              for (var d = [], p2 = 0, S3 = n.storeNames.length; p2 < S3; p2++) d.push(l(n.storeNames[p2]));
              m3.all(d).then(function() {
                f3();
              }).catch(function(B2) {
                s(B2);
              });
            }, function(c) {
              s(c);
            });
          });
        }) : i = m3.reject("Invalid arguments"), w2(i, t), i;
      }
      var Ar2 = { _driver: "webSQLStorage", _initStorage: hr2, _support: cr2(), iterate: yr2, getItem: mr2, setItem: pr2, removeItem: gr2, clear: br2, length: _r2, key: wr2, keys: Ir2, dropInstance: Sr2 };
      function Rr2() {
        try {
          return typeof localStorage < "u" && "setItem" in localStorage && !!localStorage.setItem;
        } catch {
          return false;
        }
      }
      function Ve(e, t) {
        var r8 = e.name + "/";
        return e.storeName !== t.storeName && (r8 += e.storeName + "/"), r8;
      }
      function Dr2() {
        var e = "_localforage_support_test";
        try {
          return localStorage.setItem(e, true), localStorage.removeItem(e), false;
        } catch {
          return true;
        }
      }
      function Tr2() {
        return !Dr2() || localStorage.length > 0;
      }
      function Br2(e) {
        var t = this, r8 = {};
        if (e) for (var o in e) r8[o] = e[o];
        return r8.keyPrefix = Ve(e, t._defaultConfig), Tr2() ? (t._dbInfo = r8, r8.serializer = Ie2, m3.resolve()) : m3.reject();
      }
      function Nr2(e) {
        var t = this, r8 = t.ready().then(function() {
          for (var o = t._dbInfo.keyPrefix, i = localStorage.length - 1; i >= 0; i--) {
            var n = localStorage.key(i);
            n.indexOf(o) === 0 && localStorage.removeItem(n);
          }
        });
        return w2(r8, e), r8;
      }
      function xr2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = r8.ready().then(function() {
          var i = r8._dbInfo, n = localStorage.getItem(i.keyPrefix + e);
          return n && (n = i.serializer.deserialize(n)), n;
        });
        return w2(o, t), o;
      }
      function Or2(e, t) {
        var r8 = this, o = r8.ready().then(function() {
          for (var i = r8._dbInfo, n = i.keyPrefix, f3 = n.length, s = localStorage.length, c = 1, l = 0; l < s; l++) {
            var d = localStorage.key(l);
            if (d.indexOf(n) === 0) {
              var p2 = localStorage.getItem(d);
              if (p2 && (p2 = i.serializer.deserialize(p2)), p2 = e(p2, d.substring(f3), c++), p2 !== void 0) return p2;
            }
          }
        });
        return w2(o, t), o;
      }
      function Cr2(e, t) {
        var r8 = this, o = r8.ready().then(function() {
          var i = r8._dbInfo, n;
          try {
            n = localStorage.key(e);
          } catch {
            n = null;
          }
          return n && (n = n.substring(i.keyPrefix.length)), n;
        });
        return w2(o, t), o;
      }
      function Lr2(e) {
        var t = this, r8 = t.ready().then(function() {
          for (var o = t._dbInfo, i = localStorage.length, n = [], f3 = 0; f3 < i; f3++) {
            var s = localStorage.key(f3);
            s.indexOf(o.keyPrefix) === 0 && n.push(s.substring(o.keyPrefix.length));
          }
          return n;
        });
        return w2(r8, e), r8;
      }
      function Pr2(e) {
        var t = this, r8 = t.keys().then(function(o) {
          return o.length;
        });
        return w2(r8, e), r8;
      }
      function Mr2(e, t) {
        var r8 = this;
        e = F3(e);
        var o = r8.ready().then(function() {
          var i = r8._dbInfo;
          localStorage.removeItem(i.keyPrefix + e);
        });
        return w2(o, t), o;
      }
      function Fr2(e, t, r8) {
        var o = this;
        e = F3(e);
        var i = o.ready().then(function() {
          t === void 0 && (t = null);
          var n = t;
          return new m3(function(f3, s) {
            var c = o._dbInfo;
            c.serializer.serialize(t, function(l, d) {
              if (d) s(d);
              else try {
                localStorage.setItem(c.keyPrefix + e, l), f3(n);
              } catch (p2) {
                (p2.name === "QuotaExceededError" || p2.name === "NS_ERROR_DOM_QUOTA_REACHED") && s(p2), s(p2);
              }
            });
          });
        });
        return w2(i, r8), i;
      }
      function Ur2(e, t) {
        if (t = $2.apply(this, arguments), e = typeof e != "function" && e || {}, !e.name) {
          var r8 = this.config();
          e.name = e.name || r8.name, e.storeName = e.storeName || r8.storeName;
        }
        var o = this, i;
        return e.name ? i = new m3(function(n) {
          e.storeName ? n(Ve(e, o._defaultConfig)) : n(e.name + "/");
        }).then(function(n) {
          for (var f3 = localStorage.length - 1; f3 >= 0; f3--) {
            var s = localStorage.key(f3);
            s.indexOf(n) === 0 && localStorage.removeItem(s);
          }
        }) : i = m3.reject("Invalid arguments"), w2(i, t), i;
      }
      var Wr2 = { _driver: "localStorageWrapper", _initStorage: Br2, _support: Rr2(), iterate: Or2, getItem: xr2, setItem: Fr2, removeItem: Mr2, clear: Nr2, length: Pr2, key: Cr2, keys: Lr2, dropInstance: Ur2 }, zr2 = function(t, r8) {
        return t === r8 || typeof t == "number" && typeof r8 == "number" && isNaN(t) && isNaN(r8);
      }, Yr2 = function(t, r8) {
        for (var o = t.length, i = 0; i < o; ) {
          if (zr2(t[i], r8)) return true;
          i++;
        }
        return false;
      }, Ge2 = Array.isArray || function(e) {
        return Object.prototype.toString.call(e) === "[object Array]";
      }, ce2 = {}, je2 = {}, se = { INDEXEDDB: ur2, WEBSQL: Ar2, LOCALSTORAGE: Wr2 }, Kr2 = [se.INDEXEDDB._driver, se.WEBSQL._driver, se.LOCALSTORAGE._driver], he2 = ["dropInstance"], Ee2 = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(he2), Hr2 = { description: "", driver: Kr2.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };
      function Vr(e, t) {
        e[t] = function() {
          var r8 = arguments;
          return e.ready().then(function() {
            return e[t].apply(e, r8);
          });
        };
      }
      function Se2() {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e];
          if (t) for (var r8 in t) t.hasOwnProperty(r8) && (Ge2(t[r8]) ? arguments[0][r8] = t[r8].slice() : arguments[0][r8] = t[r8]);
        }
        return arguments[0];
      }
      var Gr2 = function() {
        function e(t) {
          V2(this, e);
          for (var r8 in se) if (se.hasOwnProperty(r8)) {
            var o = se[r8], i = o._driver;
            this[r8] = i, ce2[i] || this.defineDriver(o);
          }
          this._defaultConfig = Se2({}, Hr2), this._config = Se2({}, this._defaultConfig, t), this._driverSet = null, this._initDriver = null, this._ready = false, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function() {
          });
        }
        return e.prototype.config = function(r8) {
          if ((typeof r8 > "u" ? "undefined" : L3(r8)) === "object") {
            if (this._ready) return new Error("Can't call config() after localforage has been used.");
            for (var o in r8) {
              if (o === "storeName" && (r8[o] = r8[o].replace(/\W/g, "_")), o === "version" && typeof r8[o] != "number") return new Error("Database version must be a number.");
              this._config[o] = r8[o];
            }
            return "driver" in r8 && r8.driver ? this.setDriver(this._config.driver) : true;
          } else return typeof r8 == "string" ? this._config[r8] : this._config;
        }, e.prototype.defineDriver = function(r8, o, i) {
          var n = new m3(function(f3, s) {
            try {
              var c = r8._driver, l = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
              if (!r8._driver) {
                s(l);
                return;
              }
              for (var d = Ee2.concat("_initStorage"), p2 = 0, S3 = d.length; p2 < S3; p2++) {
                var B2 = d[p2], x2 = !Yr2(he2, B2);
                if ((x2 || r8[B2]) && typeof r8[B2] != "function") {
                  s(l);
                  return;
                }
              }
              var Y3 = function() {
                for (var le2 = function(Qr2) {
                  return function() {
                    var Jr2 = new Error("Method " + Qr2 + " is not implemented by the current driver"), Xe2 = m3.reject(Jr2);
                    return w2(Xe2, arguments[arguments.length - 1]), Xe2;
                  };
                }, Ae2 = 0, Xr = he2.length; Ae2 < Xr; Ae2++) {
                  var Re2 = he2[Ae2];
                  r8[Re2] || (r8[Re2] = le2(Re2));
                }
              };
              Y3();
              var U3 = function(le2) {
                ce2[c] && console.info("Redefining LocalForage driver: " + c), ce2[c] = r8, je2[c] = le2, f3();
              };
              "_support" in r8 ? r8._support && typeof r8._support == "function" ? r8._support().then(U3, s) : U3(!!r8._support) : U3(true);
            } catch (q2) {
              s(q2);
            }
          });
          return T3(n, o, i), n;
        }, e.prototype.driver = function() {
          return this._driver || null;
        }, e.prototype.getDriver = function(r8, o, i) {
          var n = ce2[r8] ? m3.resolve(ce2[r8]) : m3.reject(new Error("Driver not found."));
          return T3(n, o, i), n;
        }, e.prototype.getSerializer = function(r8) {
          var o = m3.resolve(Ie2);
          return T3(o, r8), o;
        }, e.prototype.ready = function(r8) {
          var o = this, i = o._driverSet.then(function() {
            return o._ready === null && (o._ready = o._initDriver()), o._ready;
          });
          return T3(i, r8, r8), i;
        }, e.prototype.setDriver = function(r8, o, i) {
          var n = this;
          Ge2(r8) || (r8 = [r8]);
          var f3 = this._getSupportedDrivers(r8);
          function s() {
            n._config.driver = n.driver();
          }
          function c(p2) {
            return n._extend(p2), s(), n._ready = n._initStorage(n._config), n._ready;
          }
          function l(p2) {
            return function() {
              var S3 = 0;
              function B2() {
                for (; S3 < p2.length; ) {
                  var x2 = p2[S3];
                  return S3++, n._dbInfo = null, n._ready = null, n.getDriver(x2).then(c).catch(B2);
                }
                s();
                var Y3 = new Error("No available storage method found.");
                return n._driverSet = m3.reject(Y3), n._driverSet;
              }
              return B2();
            };
          }
          var d = this._driverSet !== null ? this._driverSet.catch(function() {
            return m3.resolve();
          }) : m3.resolve();
          return this._driverSet = d.then(function() {
            var p2 = f3[0];
            return n._dbInfo = null, n._ready = null, n.getDriver(p2).then(function(S3) {
              n._driver = S3._driver, s(), n._wrapLibraryMethodsWithReady(), n._initDriver = l(f3);
            });
          }).catch(function() {
            s();
            var p2 = new Error("No available storage method found.");
            return n._driverSet = m3.reject(p2), n._driverSet;
          }), T3(this._driverSet, o, i), this._driverSet;
        }, e.prototype.supports = function(r8) {
          return !!je2[r8];
        }, e.prototype._extend = function(r8) {
          Se2(this, r8);
        }, e.prototype._getSupportedDrivers = function(r8) {
          for (var o = [], i = 0, n = r8.length; i < n; i++) {
            var f3 = r8[i];
            this.supports(f3) && o.push(f3);
          }
          return o;
        }, e.prototype._wrapLibraryMethodsWithReady = function() {
          for (var r8 = 0, o = Ee2.length; r8 < o; r8++) Vr(this, Ee2[r8]);
        }, e.prototype.createInstance = function(r8) {
          return new e(r8);
        }, e;
      }(), jr = new Gr2();
      W2.exports = jr;
    }, { 3: 3 }] }, {}, [4])(4);
  });
});
var er2 = Je2((me2, ke) => {
  "use strict";
  (function(_2, y3) {
    typeof me2 == "object" && typeof ke < "u" ? y3(me2) : typeof define == "function" && define.amd ? define("localforage-driver-memory", ["exports"], y3) : y3(_2.LocalforageDriverMemory = {});
  })(typeof self < "u" ? self : me2, function(_2) {
    "use strict";
    var y3 = "localforage-driver-memory";
    function O3(a) {
      var u2 = typeof Symbol == "function" && a[Symbol.iterator], v2 = 0;
      return u2 ? u2.call(a) : { next: function() {
        return a && v2 >= a.length && (a = void 0), { value: a && a[v2++], done: !a };
      } };
    }
    function C3(a, u2) {
      a = a || [], u2 = u2 || {};
      try {
        return new Blob(a, u2);
      } catch (I2) {
        if (I2.name !== "TypeError") throw I2;
        for (var v2 = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, g2 = new v2(), b3 = 0; b3 < a.length; b3 += 1) g2.append(a[b3]);
        return g2.getBlob(u2.type);
      }
    }
    var W2 = /^~~local_forage_type~([^~]+)~/, Z3 = 9, L3 = Z3 + 4, V2 = Object.prototype.toString;
    function D2(a) {
      var u2 = a.length * 0.75, v2 = a.length;
      a[a.length - 1] === "=" && (u2--, a[a.length - 2] === "=" && u2--);
      for (var g2 = new ArrayBuffer(u2), b3 = new Uint8Array(g2), I2 = 0, R3 = 0; I2 < v2; I2 += 4) {
        var G2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I2]), fe = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I2 + 1]), ie2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I2 + 2]), ue2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I2 + 3]);
        b3[R3++] = G2 << 2 | fe >> 4, b3[R3++] = (fe & 15) << 4 | ie2 >> 2, b3[R3++] = (ie2 & 3) << 6 | ue2 & 63;
      }
      return g2;
    }
    function z3(a) {
      for (var u2 = new Uint8Array(a), v2 = "", g2 = 0; g2 < u2.length; g2 += 3) v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[u2[g2] >> 2], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(u2[g2] & 3) << 4 | u2[g2 + 1] >> 4], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(u2[g2 + 1] & 15) << 2 | u2[g2 + 2] >> 6], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[u2[g2 + 2] & 63];
      return u2.length % 3 === 2 ? v2 = v2.substring(0, v2.length - 1) + "=" : u2.length % 3 === 1 && (v2 = v2.substring(0, v2.length - 2) + "=="), v2;
    }
    function K2(a, u2) {
      var v2 = "";
      if (a && (v2 = V2.call(a)), a && (v2 === "[object ArrayBuffer]" || a.buffer && V2.call(a.buffer) === "[object ArrayBuffer]")) {
        var g2 = void 0, b3 = "__lfsc__:";
        a instanceof ArrayBuffer ? (g2 = a, b3 += "arbf") : (g2 = a.buffer, v2 === "[object Int8Array]" ? b3 += "si08" : v2 === "[object Uint8Array]" ? b3 += "ui08" : v2 === "[object Uint8ClampedArray]" ? b3 += "uic8" : v2 === "[object Int16Array]" ? b3 += "si16" : v2 === "[object Uint16Array]" ? b3 += "ur16" : v2 === "[object Int32Array]" ? b3 += "si32" : v2 === "[object Uint32Array]" ? b3 += "ui32" : v2 === "[object Float32Array]" ? b3 += "fl32" : v2 === "[object Float64Array]" ? b3 += "fl64" : u2(new Error("Failed to get type for BinaryArray"))), u2(b3 + z3(g2));
      } else if (v2 === "[object Blob]") {
        var I2 = new FileReader();
        I2.onload = function() {
          var R3 = "~~local_forage_type~" + a.type + "~" + z3(this.result);
          u2("__lfsc__:blob" + R3);
        }, I2.readAsArrayBuffer(a);
      } else try {
        u2(JSON.stringify(a));
      } catch (R3) {
        console.error("Couldn't convert value into a JSON string: ", a), u2(null, R3);
      }
    }
    function J3(a) {
      if (a.substring(0, Z3) !== "__lfsc__:") return JSON.parse(a);
      var u2 = a.substring(L3), v2 = a.substring(Z3, L3), g2;
      if (v2 === "blob" && W2.test(u2)) {
        var b3 = u2.match(W2);
        g2 = b3[1], u2 = u2.substring(b3[0].length);
      }
      var I2 = D2(u2);
      switch (v2) {
        case "arbf":
          return I2;
        case "blob":
          return C3([I2], { type: g2 });
        case "si08":
          return new Int8Array(I2);
        case "ui08":
          return new Uint8Array(I2);
        case "uic8":
          return new Uint8ClampedArray(I2);
        case "si16":
          return new Int16Array(I2);
        case "ur16":
          return new Uint16Array(I2);
        case "si32":
          return new Int32Array(I2);
        case "ui32":
          return new Uint32Array(I2);
        case "fl32":
          return new Float32Array(I2);
        case "fl64":
          return new Float64Array(I2);
        default:
          throw new Error("Unkown type: " + v2);
      }
    }
    function m3(a) {
      var u2, v2;
      if (a === null || typeof a != "object" || "isActiveClone" in a) return a;
      var g2 = a instanceof Date ? new Date(a) : a.constructor();
      try {
        for (var b3 = O3(Object.keys(a)), I2 = b3.next(); !I2.done; I2 = b3.next()) {
          var R3 = I2.value;
          Object.prototype.hasOwnProperty.call(a, R3) && (a.isActiveClone = null, g2[R3] = m3(a[R3]), delete a.isActiveClone);
        }
      } catch (G2) {
        u2 = { error: G2 };
      } finally {
        try {
          I2 && !I2.done && (v2 = b3.return) && v2.call(b3);
        } finally {
          if (u2) throw u2.error;
        }
      }
      return g2;
    }
    function w2(a, u2) {
      return (a.name || u2.name) + "/" + (a.storeName || u2.storeName) + "/";
    }
    function T3(a, u2) {
      u2 && a.then(function(v2) {
        u2(null, v2);
      }, function(v2) {
        u2(v2);
      });
    }
    function F3() {
      for (var a = [], u2 = 0; u2 < arguments.length; u2++) a[u2] = arguments[u2];
      if (arguments.length && typeof arguments[arguments.length - 1] == "function") return arguments[arguments.length - 1];
    }
    function $2(a, u2) {
      var v2 = this;
      if (u2 = F3.apply(this, arguments), a = typeof a != "function" && a || {}, !a.name) {
        var g2 = this.config();
        a.name = a.name || g2.name, a.storeName = a.storeName || g2.storeName;
      }
      var b3;
      return a.name ? b3 = new Promise(function(I2) {
        a.storeName ? I2(w2(a, v2._defaultConfig)) : I2(a.name + "/");
      }) : b3 = Promise.reject("Invalid arguments"), { promise: b3, callback: u2 };
    }
    function P2(a) {
      return typeof a != "string" && (console.warn(a + " used as a key, but it is not a string."), a = String(a)), a;
    }
    var k2 = { bufferToString: z3, deserialize: J3, serialize: K2, stringToBuffer: D2 }, M2 = {}, ae2 = function() {
      function a(u2) {
        this.kp = u2, this.data = {};
      }
      return a.resolve = function(u2) {
        return M2[u2] || (M2[u2] = new a(u2)), M2[u2];
      }, a.prototype.clear = function() {
        this.data = {};
      }, a.prototype.drop = function() {
        this.clear(), delete M2[this.kp];
      }, a.prototype.get = function(u2) {
        return this.data[u2];
      }, a.prototype.key = function(u2) {
        return this.keys()[u2];
      }, a.prototype.keys = function() {
        return Object.keys(this.data);
      }, a.prototype.rm = function(u2) {
        delete this.data[u2];
      }, a.prototype.set = function(u2, v2) {
        this.data[u2] = v2;
      }, a;
    }();
    function re2(a) {
      var u2 = a ? m3(a) : {}, v2 = w2(u2, this._defaultConfig), g2 = ae2.resolve(v2);
      return this._dbInfo = u2, this._dbInfo.serializer = k2, this._dbInfo.keyPrefix = v2, this._dbInfo.mStore = g2, Promise.resolve();
    }
    function h3(a) {
      var u2 = this, v2 = this.ready().then(function() {
        u2._dbInfo.mStore.clear();
      });
      return T3(v2, a), v2;
    }
    function A3(a, u2) {
      var v2 = $2.apply(this, arguments), g2 = v2.promise, b3 = v2.callback, I2 = g2.then(function(R3) {
        ae2.resolve(R3).drop();
      });
      return T3(I2, b3), g2;
    }
    function E3(a, u2) {
      var v2 = this;
      a = P2(a);
      var g2 = this.ready().then(function() {
        var b3 = v2._dbInfo.mStore.get(a);
        return b3 == null ? null : v2._dbInfo.serializer.deserialize(b3);
      });
      return T3(g2, u2), g2;
    }
    function N2(a, u2) {
      var v2 = this, g2 = this.ready().then(function() {
        for (var b3 = v2._dbInfo.mStore, I2 = b3.keys(), R3 = 0; R3 < I2.length; R3++) {
          var G2 = b3.get(I2[R3]);
          if (G2 && (G2 = v2._dbInfo.serializer.deserialize(G2)), G2 = a(G2, I2[R3], R3 + 1), G2 !== void 0) return G2;
        }
      });
      return T3(g2, u2), g2;
    }
    function H3(a, u2) {
      var v2 = this, g2 = this.ready().then(function() {
        var b3;
        try {
          b3 = v2._dbInfo.mStore.key(a), b3 === void 0 && (b3 = null);
        } catch {
          b3 = null;
        }
        return b3;
      });
      return T3(g2, u2), g2;
    }
    function j2(a) {
      var u2 = this, v2 = this.ready().then(function() {
        return u2._dbInfo.mStore.keys();
      });
      return T3(v2, a), v2;
    }
    function X3(a) {
      var u2 = this.keys().then(function(v2) {
        return v2.length;
      });
      return T3(u2, a), u2;
    }
    function Q3(a, u2) {
      var v2 = this;
      a = P2(a);
      var g2 = this.ready().then(function() {
        v2._dbInfo.mStore.rm(a);
      });
      return T3(g2, u2), g2;
    }
    function ee2(a, u2, v2) {
      var g2 = this;
      a = P2(a);
      var b3 = this.ready().then(function() {
        u2 === void 0 && (u2 = null);
        var I2 = u2;
        return new Promise(function(R3, G2) {
          g2._dbInfo.serializer.serialize(u2, function(fe, ie2) {
            if (ie2) G2(ie2);
            else try {
              g2._dbInfo.mStore.set(a, fe), R3(I2);
            } catch (ue2) {
              G2(ue2);
            }
          });
        });
      });
      return T3(b3, v2), b3;
    }
    var oe = true;
    _2._support = oe, _2._driver = y3, _2._initStorage = re2, _2.clear = h3, _2.dropInstance = A3, _2.getItem = E3, _2.iterate = N2, _2.key = H3, _2.keys = j2, _2.length = X3, _2.removeItem = Q3, _2.setItem = ee2, Object.defineProperty(_2, "__esModule", { value: true });
  });
});
var pe = $e2(qe2());
var Te = $e2(er2());
var at2 = { display: "block", visibility: "hidden", position: "fixed", top: "0", right: "0", width: "100%", height: "100%", borderRadius: "0", border: "none", opacity: "0", zIndex: "-1" };
function ft2(_2) {
  for (let [y3, O3] of Object.entries(at2)) _2.style[y3] = O3;
}
function st2(_2) {
  return !![].slice.call(document.querySelectorAll(".magic-iframe")).find((O3) => O3.src.includes(_2));
}
var ye = class extends He {
  constructor() {
    super(...arguments);
    __publicField(this, "activeElement", null);
    __publicField(this, "iframe");
    __publicField(this, "relayerSrc", Ge(`/send?params=${encodeURIComponent(this.parameters)}`, this.endpoint).href);
  }
  init() {
    this.test = "hello", this.iframe = new Promise((y3) => {
      let O3 = () => {
        if (st2(encodeURIComponent(this.parameters))) Bn().log();
        else {
          let C3 = document.createElement("iframe");
          C3.classList.add("magic-iframe"), C3.dataset.magicIframeLabel = Ge(this.endpoint).host, C3.title = "Secure Modal", C3.src = this.relayerSrc, C3.allow = "clipboard-read; clipboard-write", ft2(C3), document.body.appendChild(C3), y3(C3);
        }
      };
      ["loaded", "interactive", "complete"].includes(document.readyState) ? O3() : window.addEventListener("load", O3, false);
    }), this.iframe.then((y3) => {
      y3 instanceof HTMLIFrameElement && y3.addEventListener("load", async () => {
        this.heartbeatDebounce();
      });
    }), window.addEventListener("message", (y3) => {
      if (y3.origin === this.endpoint && y3.data.msgType && (y3.data.msgType.includes(E.MAGIC_PONG) && (this.lastPongTime = Date.now()), y3.data && this.messageHandlers.size)) {
        y3.data.response = y3.data.response ?? {}, this.stopHeartBeat();
        for (let O3 of this.messageHandlers.values()) O3(y3);
      }
    }), window.addEventListener("beforeunload", () => {
      this.stopHeartBeat();
    });
  }
  async showOverlay() {
    let y3 = await this.iframe;
    y3.style.visibility = "visible", y3.style.zIndex = "2147483647", y3.style.opacity = "1", this.activeElement = document.activeElement, y3.focus();
  }
  async hideOverlay() {
    var _a3;
    let y3 = await this.iframe;
    y3.style.visibility = "hidden", y3.style.zIndex = "-1", y3.style.opacity = "0", ((_a3 = this.activeElement) == null ? void 0 : _a3.focus) && this.activeElement.focus(), this.activeElement = null;
  }
  async _post(y3) {
    let O3 = await this.iframe;
    if (O3 && O3.contentWindow) O3.contentWindow.postMessage(y3, this.endpoint);
    else throw pt();
  }
  async checkRelayerExistsInDOM() {
    let y3 = await this.iframe;
    return !y3 || !y3.contentWindow ? false : !![].slice.call(document.querySelectorAll(".magic-iframe")).find((C3) => C3.src.includes(encodeURIComponent(this.parameters)));
  }
  async reloadRelayer() {
    let y3 = await this.iframe;
    if (this.stopHeartBeat(), !y3) {
      this.init(), console.warn("Magic SDK: Modal lost, re-initiating");
      return;
    }
    if (!y3.contentWindow) {
      document.body.appendChild(y3), console.warn("Magic SDK: Modal did not append in the iframe, re-initiating");
      return;
    }
    y3 && (y3.src = this.relayerSrc);
  }
};
var wt2 = Hr(Be, { platform: "web", sdkName: "magic-sdk", version: "29.1.0", defaultEndpoint: "https://auth.magic.link/", ViewController: ye, configureStorage: async () => {
  let _2 = pe.default.createInstance({ name: "MagicAuthLocalStorageDB", storeName: "MagicAuthLocalStorage" });
  return await _2.defineDriver(Te), await _2.setDriver([pe.default.INDEXEDDB, pe.default.LOCALSTORAGE, Te._driver]), _2;
} });
export {
  k as AuthEventOnReceived,
  y as DeepLinkPage,
  O as DeviceVerificationEventEmit,
  S as DeviceVerificationEventOnReceived,
  G as DisableMFAEventEmit,
  V as DisableMFAEventOnReceived,
  D as EnableMFAEventEmit,
  w as EnableMFAEventOnReceived,
  H as EthChainType,
  X2 as Extension,
  ue as ExtensionError,
  re as ExtensionWarning,
  L as FarcasterLoginEventEmit,
  _ as LocalStorageKeys,
  R as LoginWithEmailOTPEventEmit,
  T as LoginWithEmailOTPEventOnReceived,
  A as LoginWithMagicLinkEventEmit,
  I as LoginWithMagicLinkEventOnReceived,
  N as LoginWithSmsOTPEventEmit,
  h as LoginWithSmsOTPEventOnReceived,
  wt2 as Magic,
  E as MagicIncomingWindowMessage,
  x as MagicOutgoingWindowMessage,
  g as MagicPayloadMethod,
  Q as NftCheckoutIntermediaryEvents,
  U2 as RPCError,
  u as RPCErrorCode,
  b as RecencyCheckEventEmit,
  C as RecencyCheckEventOnReceived,
  j as RecoverAccountEventEmit,
  P as RecoverAccountEventOnReceived,
  Y as RecoveryFactorEventEmit,
  J as RecoveryFactorEventOnReceived,
  B as RecoveryMethodType,
  $ as SDKError,
  m as SDKErrorCode,
  L2 as SDKWarning,
  v as SDKWarningCode,
  f as ThirdPartyWalletEvents,
  z as UiEventsEmit,
  F as UpdateEmailEventEmit,
  U as UpdateEmailEventOnReceived,
  q as UserEventsEmit,
  W as UserEventsOnReceived,
  X as WalletEventOnReceived,
  $t as isPromiEvent,
  Z as routeToMagicMethods
};
//# sourceMappingURL=magic-sdk.js.map
